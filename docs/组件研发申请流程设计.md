# ç»„ä»¶ç ”å‘ç”³è¯·æµç¨‹è®¾è®¡

## ğŸ“‹ ç›®å½•

- [1. èƒŒæ™¯ä¸ç›®æ ‡](#1-èƒŒæ™¯ä¸ç›®æ ‡)
- [2. æ ¸å¿ƒæ¦‚å¿µ](#2-æ ¸å¿ƒæ¦‚å¿µ)
- [3. çŠ¶æ€æ¨¡å‹](#3-çŠ¶æ€æ¨¡å‹)
- [4. å®Œæ•´æµç¨‹](#4-å®Œæ•´æµç¨‹)
- [5. æ•°æ®æ¨¡å‹è®¾è®¡](#5-æ•°æ®æ¨¡å‹è®¾è®¡)
- [6. API æ¥å£è®¾è®¡](#6-api-æ¥å£è®¾è®¡)
- [7. ç»„ä»¶ä¸Šä¼ æ¥å£](#7-ç»„ä»¶ä¸Šä¼ æ¥å£)
- [8. æƒé™æ§åˆ¶](#8-æƒé™æ§åˆ¶)
- [9. ä¸šåŠ¡è§„åˆ™](#9-ä¸šåŠ¡è§„åˆ™)

---

## 1. èƒŒæ™¯ä¸ç›®æ ‡

### 1.1 æ ¸å¿ƒè®¾è®¡ç†å¿µ

**"å…ˆå®¡æ‰¹ï¼Œåå¼€å‘"** â€”â€” ç®¡ç†å‘˜å®¡æ ¸çš„æ˜¯"æ˜¯å¦å…è®¸å¼€å‘è¯¥ç»„ä»¶"ï¼Œè€Œéå®¡æ ¸å·²ä¸Šä¼ çš„ä»£ç åŒ…ã€‚

| è®¾è®¡è¦ç‚¹   | è¯´æ˜                                   |
| ---------- | -------------------------------------- |
| å®¡æ‰¹å‰ç½®   | ç®¡ç†å‘˜å…ˆæ‰¹å‡†ç”³è¯·ï¼Œç”¨æˆ·å†å¼€å§‹å¼€å‘       |
| è‡ªåŠ¨åŒ–ä¸Šä¼  | ä¸Šä¼ æ ¡éªŒé€šè¿‡åè‡ªåŠ¨å…¥åº“ï¼Œæ— éœ€äºŒæ¬¡å®¡æ ¸   |
| æ— ä¸´æ—¶ç›®å½• | ä¸Šä¼ ç›´æ¥åˆ°æ­£å¼ OSS è·¯å¾„                |
| æµç¨‹ç®€åŒ–   | 5 ä¸ªçŠ¶æ€ï¼Œ1 æ¬¡äººå·¥å®¡æ‰¹                 |
| å®‰å…¨è®¾è®¡   | å¤–éƒ¨ API ä½¿ç”¨ç”³è¯·å•å·ï¼Œä¸æš´éœ²æ•°æ®åº“ ID |

### 1.2 ç›®æ ‡

1. è§„èŒƒåŒ–çš„ç ”å‘ç”³è¯·ç®¡ç†
2. æ¸…æ™°çš„ç‰ˆæœ¬çŠ¶æ€æµè½¬
3. å¯è¿½æº¯çš„å®¡æ‰¹è®°å½•
4. çµæ´»çš„æ–‡ä»¶ä¸Šä¼ ä¸æ›¿æ¢æœºåˆ¶
5. **ç»Ÿä¸€çš„ä¸Šä¼ å…¥å£**ï¼ˆç»„ä»¶ä¸Šä¼ å¿…é¡»å…³è”ç ”å‘ç”³è¯·ï¼‰

---

## 2. æ ¸å¿ƒæ¦‚å¿µ

### 2.1 ç ”å‘ç”³è¯·ï¼ˆDevelopment Applicationï¼‰

- æ¯æ¬¡æ–°å¢ç»„ä»¶ç‰ˆæœ¬éƒ½éœ€è¦åˆ›å»ºç ”å‘ç”³è¯·
- ä¸€ä¸ªç”³è¯·å¯¹åº”ä¸€ä¸ªç»„ä»¶ç‰ˆæœ¬çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
- ç”³è¯·ä½¿ç”¨ä¸šåŠ¡å•å·ï¼ˆ`applicationNo`ï¼‰ä½œä¸ºå¤–éƒ¨æ ‡è¯†ï¼Œæ ¼å¼ï¼š`APP-YYYYMMDD-XXXX`

### 2.2 ç”³è¯·ç±»å‹ï¼ˆApplicationTypeï¼‰

| ç±»å‹      | è¯´æ˜       | è¦æ±‚                                               |
| --------- | ---------- | -------------------------------------------------- |
| `new`     | æ–°ç»„ä»¶åˆ›å»º | éœ€å¡«å†™ componentIdã€nameã€é€‰æ‹©åˆ†ç±»ï¼Œé»˜è®¤ç‰ˆæœ¬ 1.0.0 |
| `version` | ç‰ˆæœ¬è¿­ä»£   | é€‰æ‹©å·²æœ‰ç»„ä»¶ï¼Œå¡«å†™æ–°ç‰ˆæœ¬å·ï¼ˆä¸èƒ½å†²çªï¼‰             |
| `replace` | æ›¿æ¢ç‰ˆæœ¬   | é€‰æ‹©å·²æœ‰ç»„ä»¶å’Œ draft ç‰ˆæœ¬ï¼Œä½¿ç”¨ç›¸åŒç‰ˆæœ¬å·          |

### 2.3 ç»„ä»¶å…ƒæ•°æ®æ–‡ä»¶æ‹†åˆ†

ç»„ä»¶å…ƒæ•°æ®è¢«æ‹†åˆ†ä¸ºä¸¤ä¸ªæ–‡ä»¶ï¼ŒèŒè´£åˆ†ç¦»ï¼š

#### A. component.meta.supplement.jsonï¼ˆä¸šåŠ¡å‡­è¯æ–‡ä»¶ï¼‰

**æ¥æºï¼š** ç”±ç ”å‘ç”³è¯·ç³»ç»Ÿç”Ÿæˆï¼Œ**å®¡æ ¸é€šè¿‡å**æ‰å¯ä¸‹è½½  
**ä½œç”¨ï¼š** åŒ…å«ç»„ä»¶çš„åŸºæœ¬æ ‡è¯†å’Œåˆ†ç±»ä¿¡æ¯ï¼Œä½œä¸ºä¸Šä¼ æ ¡éªŒçš„ä¸šåŠ¡å‡­è¯

```json
{
  "id": "DataTable",
  "name": "æ•°æ®è¡¨æ ¼",
  "version": "1.0.0",
  "classification": {
    "level1": "table",
    "level2": "data-table",
    "displayName": {
      "level1": "è¡¨æ ¼ç»„ä»¶",
      "level2": "æ•°æ®è¡¨æ ¼"
    }
  },
  "_metadata": {
    "applicationId": 1,
    "applicationNo": "APP-20260107-0001",
    "exportTime": "2026-01-07T10:30:00Z"
  }
}
```

**å…³é”®è®¾è®¡ï¼šåªæœ‰å®¡æ ¸é€šè¿‡çŠ¶æ€ï¼ˆAPPROVEDï¼‰æ‰èƒ½ä¸‹è½½æ­¤æ–‡ä»¶**ï¼Œç¡®ä¿ç®¡ç†å‘˜å…ˆæ‰¹å‡†ç”³è¯·ã€‚

#### B. component.meta.jsonï¼ˆæ„å»ºä¿¡æ¯æ–‡ä»¶ï¼‰

**æ¥æºï¼š** ç”± `abd-cli` å·¥å…·åœ¨æ„å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆ  
**ä½œç”¨ï¼š** åŒ…å«ç»„ä»¶çš„æŠ€æœ¯ç»†èŠ‚å’Œæ„å»ºä¿¡æ¯ï¼ˆä¸å«ä¸šåŠ¡ä¿¡æ¯ï¼‰

```json
{
  "description": "é«˜æ€§èƒ½æ•°æ®è¡¨æ ¼ç»„ä»¶",
  "type": "vue-echarts",
  "framework": "vue3",
  "author": {
    "organization": "æ±Ÿè‹ç”µåŠ›å…¬å¸",
    "userName": "developer"
  },
  "files": {
    "entry": "index.esm.js",
    "style": "style.css",
    "preview": "assets/preview.png"
  },
  "buildInfo": {
    "buildTime": "2026-01-07T12:00:00Z",
    "hash": "abc123def456",
    "cliVersion": "1.0.0"
  },
  "license": "MIT"
}
```

#### C. ä¸¤ä¸ªæ–‡ä»¶çš„å…³ç³»

```
component.meta.supplement.json  +  component.meta.json  =  å®Œæ•´çš„ç»„ä»¶å…ƒæ•°æ®
       (ä¸šåŠ¡å‡­è¯)                     (æ„å»ºä¿¡æ¯)              (ç³»ç»Ÿåˆå¹¶)
         â†“                              â†“                      â†“
  (id, name, version,           (description, type,     (Component + Version)
   classification)               framework, author,
                                 files, buildInfo)
```

---

## 3. çŠ¶æ€æ¨¡å‹

### 3.1 ç ”å‘ç”³è¯·çŠ¶æ€ï¼ˆDevelopmentStatusï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç»„ä»¶ç ”å‘ç”³è¯·çŠ¶æ€æµè½¬                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   åˆ›å»ºç”³è¯·   â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ PENDING_REVIEWâ”‚â”€â”€â”€â”€â†’â”‚  CANCELLED   â”‚  (ç”³è¯·äººå–æ¶ˆ)
  â”‚   å¾…å®¡æ ¸     â”‚     â”‚   å·²å–æ¶ˆ     â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    ç®¡ç†å‘˜å®¡æ ¸
    â†™        â†˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚APPROVEDâ”‚  â”‚REJECTEDâ”‚
â”‚å®¡æ ¸é€šè¿‡â”‚  â”‚å®¡æ ¸æ‹’ç»â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚          (ç»ˆæ€)
    â”‚
  ä¸‹è½½ supplement.json
  å¼€å‘ç»„ä»¶ + abd-cli æ„å»º
  ä¸Šä¼ ç»„ä»¶åŒ… .zip
    â”‚
    â†“ æ ¡éªŒé€šè¿‡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPLETED   â”‚
â”‚   å·²å®Œæˆ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  (ç»„ä»¶å…¥åº“ draft)
```

#### çŠ¶æ€å®šä¹‰

| çŠ¶æ€ä»£ç          | çŠ¶æ€åç§°   | è¯´æ˜                                     | å¯æ‰§è¡Œæ“ä½œ               |
| ---------------- | ---------- | ---------------------------------------- | ------------------------ |
| `pending_review` | å¾…å®¡æ ¸     | ç”³è¯·åˆ›å»ºåçš„åˆå§‹çŠ¶æ€ï¼Œç­‰å¾…ç®¡ç†å‘˜å®¡æ‰¹     | ç¼–è¾‘ä¿¡æ¯ã€å–æ¶ˆç”³è¯·ã€å®¡æ ¸ |
| `approved`       | å®¡æ ¸é€šè¿‡   | ç®¡ç†å‘˜å·²æ‰¹å‡†ï¼Œå¯ä¸‹è½½ supplement å¼€å§‹å¼€å‘ | ä¸‹è½½å…ƒæ•°æ®ã€ä¸Šä¼ ç»„ä»¶åŒ…   |
| `rejected`       | å®¡æ ¸ä¸é€šè¿‡ | ç®¡ç†å‘˜é©³å›ç”³è¯·                           | æŸ¥çœ‹è¯¦æƒ…ï¼ˆç»ˆæ€ï¼‰         |
| `completed`      | å·²å®Œæˆ     | ç»„ä»¶åŒ…ä¸Šä¼ æˆåŠŸï¼Œç‰ˆæœ¬å·²å…¥åº“ draft         | æŸ¥çœ‹è¯¦æƒ…ï¼ˆç»ˆæ€ï¼‰         |
| `cancelled`      | å·²å–æ¶ˆ     | ç”³è¯·äººä¸»åŠ¨å–æ¶ˆ                           | æŸ¥çœ‹è¯¦æƒ…ï¼ˆç»ˆæ€ï¼‰         |

### 3.2 ç»„ä»¶ç‰ˆæœ¬çŠ¶æ€ï¼ˆVersion Statusï¼‰

| çŠ¶æ€        | è¯´æ˜   | ä¸ç ”å‘ç”³è¯·çš„å…³ç³»          |
| ----------- | ------ | ------------------------- |
| `draft`     | è‰ç¨¿   | ç ”å‘ç”³è¯· COMPLETED ååˆ›å»º |
| `published` | å·²å‘å¸ƒ | ä» draft å‘å¸ƒè€Œæ¥         |

---

## 4. å®Œæ•´æµç¨‹

### 4.1 æµç¨‹å›¾

```mermaid
flowchart TD
    Start([å¼€å§‹]) --> Choice{ç”³è¯·ç±»å‹}

    Choice -->|æ–°ç»„ä»¶| NewComp[å¡«å†™ç»„ä»¶ä¿¡æ¯<br/>componentId/name/åˆ†ç±»]
    Choice -->|ç‰ˆæœ¬è¿­ä»£| VersionComp[é€‰æ‹©å·²æœ‰ç»„ä»¶<br/>å¡«å†™æ–°ç‰ˆæœ¬å·]
    Choice -->|æ›¿æ¢ç‰ˆæœ¬| ReplaceComp[é€‰æ‹©å·²æœ‰ç»„ä»¶<br/>é€‰æ‹© draft ç‰ˆæœ¬]

    NewComp --> CreateApp[åˆ›å»ºç ”å‘ç”³è¯·]
    VersionComp --> CreateApp
    ReplaceComp --> CreateApp

    CreateApp --> PendingReview[çŠ¶æ€: PENDING_REVIEW<br/>å¾…å®¡æ ¸]

    PendingReview --> ReviewChoice{ç®¡ç†å‘˜å®¡æ ¸}
    PendingReview --> Cancel[å–æ¶ˆç”³è¯·]
    Cancel --> Cancelled[çŠ¶æ€: CANCELLED<br/>å·²å–æ¶ˆ]

    ReviewChoice -->|é€šè¿‡| Approved[çŠ¶æ€: APPROVED<br/>å®¡æ ¸é€šè¿‡]
    ReviewChoice -->|é©³å›| Rejected[çŠ¶æ€: REJECTED<br/>å®¡æ ¸ä¸é€šè¿‡]

    Approved --> Download[ä¸‹è½½ supplement.json]
    Download --> Develop[å¼€å‘ç»„ä»¶ + abd-cli æ„å»º]
    Develop --> Upload[ä¸Šä¼ ç»„ä»¶åŒ… .zip]

    Upload --> Validate{è‡ªåŠ¨æ ¡éªŒ}
    Validate -->|æˆåŠŸ| Completed[çŠ¶æ€: COMPLETED<br/>å·²å®Œæˆ]
    Validate -->|å¤±è´¥| UploadFailed[è¿”å›é”™è¯¯ä¿¡æ¯<br/>ä¿æŒ APPROVED çŠ¶æ€]
    UploadFailed --> Upload

    Completed --> CreateVersion[åˆ›å»º ComponentVersion<br/>çŠ¶æ€: draft]

    style PendingReview fill:#E3F2FD
    style Approved fill:#E8F5E9
    style Completed fill:#C8E6C9
    style Rejected fill:#FFCDD2
    style Cancelled fill:#CFD8DC
```

### 4.2 è¯¦ç»†æ­¥éª¤è¯´æ˜

#### æ­¥éª¤ 1ï¼šå‘èµ·ç ”å‘ç”³è¯·

ç”¨æˆ·é€šè¿‡ `POST /api/development-applications` åˆ›å»ºç”³è¯·ï¼Œæ ¹æ® `applicationType` åŒºåˆ†ä¸åŒåœºæ™¯ã€‚

#### æ­¥éª¤ 2ï¼šç®¡ç†å‘˜å®¡æ ¸

- ç®¡ç†å‘˜å®¡æ ¸çš„æ˜¯ç”³è¯·ä¿¡æ¯ï¼Œåˆ¤æ–­æ˜¯å¦å…è®¸å¼€å‘è¯¥ç»„ä»¶
- æ™®é€šå®¡æ ¸ï¼šä¸èƒ½å®¡æ ¸è‡ªå·±çš„ç”³è¯·
- è‡ªåŠ©å®¡æ‰¹ï¼šç®¡ç†å‘˜å¯å®¡æ‰¹è‡ªå·±çš„ç”³è¯·ï¼ˆéœ€ç‰¹æ®Šæƒé™ï¼‰

#### æ­¥éª¤ 3ï¼šå¯¼å‡ºå…ƒæ•°æ®æ–‡ä»¶

å®¡æ ¸é€šè¿‡åï¼Œç”¨æˆ·é€šè¿‡ `GET /api/development-applications/:applicationNo/export-meta` ä¸‹è½½ `component.meta.supplement.json`ã€‚

#### æ­¥éª¤ 4ï¼šå¼€å‘ä¸æ„å»º

1. ğŸ“¥ ä¸‹è½½ `component.meta.supplement.json`
2. ğŸ“‚ å°†æ–‡ä»¶æ”¾å…¥ç»„ä»¶é¡¹ç›®æ ¹ç›®å½•
3. ğŸ’» å¼€å‘ç»„ä»¶ä»£ç 
4. ğŸ”¨ ä½¿ç”¨ `abd-cli build` æ„å»ºï¼ˆè‡ªåŠ¨ç”Ÿæˆ `component.meta.json`ï¼‰
5. ğŸ“¦ æ‰“åŒ… .zip æ–‡ä»¶

**ç»„ä»¶åŒ…ç»“æ„ï¼š**

```
DataTable-1.0.0.zip
â”œâ”€â”€ component.meta.supplement.json  â† ä»ç”³è¯·ç³»ç»Ÿä¸‹è½½
â”œâ”€â”€ component.meta.json              â† abd-cli æ„å»ºç”Ÿæˆ
â”œâ”€â”€ index.esm.js                     â† ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ style.css                        â† æ ·å¼æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ assets/
    â””â”€â”€ preview.png                  â† é¢„è§ˆå›¾ï¼ˆå¯é€‰ï¼‰
```

#### æ­¥éª¤ 5ï¼šä¸Šä¼ ç»„ä»¶åŒ…

é€šè¿‡ `POST /api/components/upload` ä¸Šä¼ ç»„ä»¶åŒ…ï¼Œç³»ç»Ÿè‡ªåŠ¨ï¼š

1. æ ¡éªŒ supplement.json ä¸ç”³è¯·è®°å½•çš„ä¸€è‡´æ€§
2. æ ¡éªŒç”³è¯·çŠ¶æ€å¿…é¡»ä¸º APPROVED
3. æ ¡éªŒ meta.json ä¸­å£°æ˜çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨
4. æ ¹æ®ç”³è¯·ç±»å‹ï¼ˆNEW/VERSION/REPLACEï¼‰åˆ›å»ºæˆ–æ›´æ–°è®°å½•
5. æ›´æ–°ç”³è¯·çŠ¶æ€ä¸º COMPLETED

---

## 5. æ•°æ®æ¨¡å‹è®¾è®¡

### 5.1 å®ä½“ï¼šDevelopmentApplication

```typescript
@Entity('development_applications')
export class DevelopmentApplication extends BaseEntity {
  /** ç”³è¯·å•å·ï¼ˆå”¯ä¸€ï¼‰ï¼Œæ ¼å¼ï¼šAPP-YYYYMMDD-XXXX */
  @Column({ type: 'varchar', length: 50, unique: true, name: 'application_no' })
  applicationNo: string

  /** ç”³è¯·ç±»å‹ï¼šnew | version | replace */
  @Column({ type: 'varchar', length: 20, name: 'application_type' })
  applicationType: ApplicationType

  /** ç»„ä»¶ID */
  @Column({ type: 'varchar', length: 100, name: 'component_id' })
  componentId: string

  /** ç»„ä»¶åç§° */
  @Column({ type: 'varchar', length: 100, nullable: true })
  name: string | null

  /** ç»„ä»¶æè¿° */
  @Column({ type: 'text', nullable: true })
  description: string | null

  /** ä¸€çº§åˆ†ç±»æ ‡è¯† */
  @Column({ type: 'varchar', length: 50, nullable: true, name: 'classification_level1' })
  classificationLevel1: string | null

  /** äºŒçº§åˆ†ç±»æ ‡è¯† */
  @Column({ type: 'varchar', length: 50, nullable: true, name: 'classification_level2' })
  classificationLevel2: string | null

  /** ä¸€çº§åˆ†ç±»æ˜¾ç¤ºåç§° */
  @Column({ type: 'varchar', length: 100, nullable: true, name: 'classification_level1_name' })
  classificationLevel1Name: string | null

  /** äºŒçº§åˆ†ç±»æ˜¾ç¤ºåç§° */
  @Column({ type: 'varchar', length: 100, nullable: true, name: 'classification_level2_name' })
  classificationLevel2Name: string | null

  /** ç›®æ ‡ç‰ˆæœ¬å· */
  @Column({ type: 'varchar', length: 50, name: 'target_version' })
  targetVersion: string

  /** ç‰ˆæœ¬æ›´æ–°æ—¥å¿— */
  @Column({ type: 'text', nullable: true })
  changelog: string | null

  /** ç ”å‘ç”³è¯·çŠ¶æ€ */
  @Column({ type: 'varchar', length: 20, default: 'pending_review', name: 'development_status' })
  developmentStatus: DevelopmentStatus

  /** ä¸Šä¼ æ–‡ä»¶ä¿¡æ¯ï¼ˆJSONï¼‰ */
  @Column({ type: 'json', nullable: true, name: 'upload_info' })
  uploadInfo: IUploadInfo | null

  /** å®¡æ ¸ä¿¡æ¯ï¼ˆJSONï¼‰ */
  @Column({ type: 'json', nullable: true, name: 'review_info' })
  reviewInfo: IReviewInfo | null

  /** å…³è”çš„ç»„ä»¶ç‰ˆæœ¬IDï¼ˆä¸Šä¼ æˆåŠŸåè®¾ç½®ï¼‰ */
  @Column({ type: 'int', nullable: true, name: 'component_version_id' })
  componentVersionId: number | null

  /** å…³è”çš„ç°æœ‰ç‰ˆæœ¬IDï¼ˆä»… replace åœºæ™¯ï¼‰ */
  @Column({ type: 'int', nullable: true, name: 'existing_version_id' })
  existingVersionId: number | null

  /** ç”³è¯·äººID */
  @Column({ type: 'int', name: 'applicant_id' })
  applicantId: number

  /** å®¡æ ¸äººID */
  @Column({ type: 'int', nullable: true, name: 'reviewer_id' })
  reviewerId: number | null

  /** æäº¤å®¡æ ¸æ—¶é—´ */
  @Column({ type: 'datetime', nullable: true, name: 'submitted_at' })
  submittedAt: Date | null

  /** å®¡æ ¸å®Œæˆæ—¶é—´ */
  @Column({ type: 'datetime', nullable: true, name: 'reviewed_at' })
  reviewedAt: Date | null

  /** å®Œæˆæ—¶é—´ */
  @Column({ type: 'datetime', nullable: true, name: 'completed_at' })
  completedAt: Date | null
}
```

### 5.2 æ¥å£å®šä¹‰

```typescript
/** ä¸Šä¼ æ–‡ä»¶ä¿¡æ¯ */
interface IUploadInfo {
  fileName?: string
  fileSize?: number
  uploadTime?: Date
  tempPath?: string
  checksum?: string
}

/** å®¡æ ¸ä¿¡æ¯ */
interface IReviewInfo {
  reviewerId?: number
  reviewerName?: string
  reviewTime?: Date
  reviewAction?: 'approve' | 'reject'
  reviewComment?: string
}
```

### 5.3 ç´¢å¼•è®¾è®¡

```sql
-- ç”³è¯·å•å·å”¯ä¸€ç´¢å¼•
CREATE UNIQUE INDEX idx_application_no ON development_applications(application_no);

-- ç»„ä»¶IDç´¢å¼•
CREATE INDEX idx_component_id ON development_applications(component_id);

-- çŠ¶æ€ç´¢å¼•
CREATE INDEX idx_development_status ON development_applications(development_status);

-- ç”³è¯·äººç´¢å¼•
CREATE INDEX idx_applicant_id ON development_applications(applicant_id);

-- å®¡æ ¸äººç´¢å¼•
CREATE INDEX idx_reviewer_id ON development_applications(reviewer_id);

-- ç»„åˆç´¢å¼•ï¼šç»„ä»¶ID + ç‰ˆæœ¬å·
CREATE INDEX idx_component_version ON development_applications(component_id, target_version);

-- å…³è”ç‰ˆæœ¬ç´¢å¼•
CREATE INDEX idx_existing_version_id ON development_applications(existing_version_id);
```

---

## 6. API æ¥å£è®¾è®¡

### 6.1 æ¥å£æ€»è§ˆ

| æ–¹æ³•  | è·¯ç”±                                                        | æƒé™           | åŠŸèƒ½           |
| ----- | ----------------------------------------------------------- | -------------- | -------------- |
| POST  | `/api/development-applications`                             | `create`       | åˆ›å»ºç”³è¯·       |
| GET   | `/api/development-applications`                             | `read`         | æŸ¥è¯¢ç”³è¯·åˆ—è¡¨   |
| GET   | `/api/development-applications/mine`                        | `read`         | æŸ¥è¯¢æˆ‘çš„ç”³è¯·   |
| GET   | `/api/development-applications/pending-review`              | `review`       | æŸ¥è¯¢å¾…å®¡æ ¸ç”³è¯· |
| GET   | `/api/development-applications/:applicationNo`              | `read`         | è·å–ç”³è¯·è¯¦æƒ…   |
| PATCH | `/api/development-applications/:applicationNo`              | `update`       | ç¼–è¾‘ç”³è¯·       |
| GET   | `/api/development-applications/:applicationNo/export-meta`  | `read`         | å¯¼å‡ºå…ƒæ•°æ®     |
| POST  | `/api/development-applications/:applicationNo/review`       | `review`       | å®¡æ ¸ç”³è¯·       |
| POST  | `/api/development-applications/:applicationNo/self-approve` | `self-approve` | ç®¡ç†å‘˜è‡ªåŠ©å®¡æ‰¹ |
| POST  | `/api/development-applications/:applicationNo/cancel`       | `update`       | å–æ¶ˆç”³è¯·       |

> **å®‰å…¨è®¾è®¡ï¼š** æ‰€æœ‰å¤–éƒ¨ API ä½¿ç”¨ `applicationNo`ï¼ˆä¸šåŠ¡å•å·ï¼‰è€Œéæ•°æ®åº“ `id`ï¼Œé¿å… IDOR æ¼æ´ã€‚

---

### 6.2 åˆ›å»ºç ”å‘ç”³è¯·

**POST** `/api/development-applications`

#### è¯·æ±‚ä½“ï¼ˆæ–°ç»„ä»¶ï¼‰

```json
{
  "applicationType": "new",
  "componentId": "DataTable",
  "name": "æ•°æ®è¡¨æ ¼",
  "description": "é«˜æ€§èƒ½æ•°æ®è¡¨æ ¼ç»„ä»¶",
  "classificationLevel1": "table",
  "classificationLevel2": "data-table",
  "targetVersion": "1.0.0",
  "changelog": "åˆå§‹ç‰ˆæœ¬"
}
```

| å­—æ®µ                 | ç±»å‹   | å¿…å¡« | è¯´æ˜                                                 |
| -------------------- | ------ | ---- | ---------------------------------------------------- |
| applicationType      | string | âœ…   | å›ºå®šå€¼ `new`                                         |
| componentId          | string | âœ…   | ç»„ä»¶IDï¼Œä»¥å­—æ¯å¼€å¤´ï¼Œåªèƒ½åŒ…å«å­—æ¯å’Œæ•°å­—               |
| name                 | string | âœ…   | ç»„ä»¶åç§°ï¼Œ2-100 å­—ç¬¦                                 |
| description          | string | âŒ   | ç»„ä»¶æè¿°ï¼Œæœ€å¤š 500 å­—ç¬¦                              |
| classificationLevel1 | string | âœ…   | ä¸€çº§åˆ†ç±»æ ‡è¯†                                         |
| classificationLevel2 | string | âœ…   | äºŒçº§åˆ†ç±»æ ‡è¯†                                         |
| targetVersion        | string | âŒ   | ç‰ˆæœ¬å·ï¼Œé»˜è®¤ `1.0.0`ï¼Œæ ¼å¼ `x.y.z` æˆ– `x.y.z-beta.1` |
| changelog            | string | âŒ   | ç‰ˆæœ¬æ›´æ–°æ—¥å¿—ï¼Œæœ€å¤š 2000 å­—ç¬¦                         |

#### è¯·æ±‚ä½“ï¼ˆç‰ˆæœ¬è¿­ä»£ï¼‰

```json
{
  "applicationType": "version",
  "componentId": "BarChart",
  "targetVersion": "2.1.0",
  "changelog": "æ–°å¢æ•°æ®é’»å–åŠŸèƒ½"
}
```

| å­—æ®µ            | ç±»å‹   | å¿…å¡« | è¯´æ˜                 |
| --------------- | ------ | ---- | -------------------- |
| applicationType | string | âœ…   | å›ºå®šå€¼ `version`     |
| componentId     | string | âœ…   | å·²å­˜åœ¨çš„ç»„ä»¶ID       |
| targetVersion   | string | âœ…   | æ–°ç‰ˆæœ¬å·ï¼ˆä¸èƒ½å†²çªï¼‰ |
| changelog       | string | âŒ   | ç‰ˆæœ¬æ›´æ–°æ—¥å¿—         |

#### è¯·æ±‚ä½“ï¼ˆæ›¿æ¢ç‰ˆæœ¬ï¼‰

```json
{
  "applicationType": "replace",
  "componentId": "BarChart",
  "existingVersionId": 123,
  "changelog": "ä¿®å¤æ€§èƒ½é—®é¢˜"
}
```

| å­—æ®µ              | ç±»å‹   | å¿…å¡« | è¯´æ˜                  |
| ----------------- | ------ | ---- | --------------------- |
| applicationType   | string | âœ…   | å›ºå®šå€¼ `replace`      |
| componentId       | string | âœ…   | å·²å­˜åœ¨çš„ç»„ä»¶ID        |
| existingVersionId | number | âœ…   | è¦æ›¿æ¢çš„ draft ç‰ˆæœ¬ID |
| changelog         | string | âŒ   | ç‰ˆæœ¬æ›´æ–°æ—¥å¿—          |

> **æ³¨æ„ï¼š** æ›¿æ¢ç‰ˆæœ¬æ—¶ï¼Œç‰ˆæœ¬å·è‡ªåŠ¨ä» `existingVersionId` å¯¹åº”çš„ç‰ˆæœ¬è·å–ã€‚

#### å“åº”

```json
{
  "message": "åˆ›å»ºç ”å‘ç”³è¯·æˆåŠŸ",
  "data": {
    "id": 1,
    "applicationNo": "APP-20260108-0001",
    "developmentStatus": "pending_review",
    "createdAt": "2026-01-08T10:00:00.000Z"
  }
}
```

---

### 6.3 æŸ¥è¯¢ç”³è¯·åˆ—è¡¨

**GET** `/api/development-applications`

#### è¯·æ±‚å‚æ•°

| å‚æ•°            | ç±»å‹   | å¿…å¡« | è¯´æ˜                                                                     |
| --------------- | ------ | ---- | ------------------------------------------------------------------------ |
| page            | number | âŒ   | é¡µç ï¼Œé»˜è®¤ 1                                                             |
| limit           | number | âŒ   | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10                                                        |
| status          | string | âŒ   | çŠ¶æ€ç­›é€‰ï¼š`pending_review`/`approved`/`rejected`/`completed`/`cancelled` |
| applicationType | string | âŒ   | ç”³è¯·ç±»å‹ï¼š`new`/`version`/`replace`                                      |
| componentId     | string | âŒ   | ç»„ä»¶IDç­›é€‰                                                               |
| applicantId     | number | âŒ   | ç”³è¯·äººIDç­›é€‰                                                             |
| keyword         | string | âŒ   | å…³é”®è¯æœç´¢ï¼ˆç”³è¯·å•å·ã€ç»„ä»¶IDã€ç»„ä»¶åç§°ï¼‰                                 |

#### å“åº”

```json
{
  "message": "è·å–ç”³è¯·åˆ—è¡¨æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "applicationNo": "APP-20260108-0001",
      "applicationType": "new",
      "applicationTypeLabel": "æ–°ç»„ä»¶åˆ›å»º",
      "componentId": "DataTable",
      "name": "æ•°æ®è¡¨æ ¼",
      "description": "é«˜æ€§èƒ½æ•°æ®è¡¨æ ¼ç»„ä»¶",
      "classificationLevel1": "table",
      "classificationLevel2": "data-table",
      "classificationLevel1Name": "è¡¨æ ¼ç»„ä»¶",
      "classificationLevel2Name": "æ•°æ®è¡¨æ ¼",
      "targetVersion": "1.0.0",
      "changelog": "åˆå§‹ç‰ˆæœ¬",
      "developmentStatus": "pending_review",
      "developmentStatusLabel": "å¾…å®¡æ ¸",
      "uploadInfo": null,
      "reviewInfo": null,
      "componentVersionId": null,
      "existingVersionId": null,
      "applicant": {
        "id": 1,
        "username": "developer"
      },
      "reviewer": null,
      "submittedAt": null,
      "reviewedAt": null,
      "completedAt": null,
      "createdAt": "2026-01-08T10:00:00.000Z",
      "updatedAt": "2026-01-08T10:00:00.000Z"
    }
  ],
  "meta": {
    "total": 100,
    "page": 1,
    "limit": 10,
    "totalPages": 10
  }
}
```

---

### 6.4 è·å–ç”³è¯·è¯¦æƒ…

**GET** `/api/development-applications/:applicationNo`

#### å“åº”

```json
{
  "message": "è·å–ç”³è¯·è¯¦æƒ…æˆåŠŸ",
  "data": {
    "id": 1,
    "applicationNo": "APP-20260108-0001",
    "applicationType": "new",
    "applicationTypeLabel": "æ–°ç»„ä»¶åˆ›å»º",
    "componentId": "DataTable",
    "name": "æ•°æ®è¡¨æ ¼",
    "description": "é«˜æ€§èƒ½æ•°æ®è¡¨æ ¼ç»„ä»¶",
    "classificationLevel1": "table",
    "classificationLevel2": "data-table",
    "classificationLevel1Name": "è¡¨æ ¼ç»„ä»¶",
    "classificationLevel2Name": "æ•°æ®è¡¨æ ¼",
    "targetVersion": "1.0.0",
    "changelog": "åˆå§‹ç‰ˆæœ¬",
    "developmentStatus": "approved",
    "developmentStatusLabel": "å®¡æ ¸é€šè¿‡",
    "uploadInfo": null,
    "reviewInfo": {
      "reviewerId": 2,
      "reviewerName": "admin",
      "reviewTime": "2026-01-08T11:00:00.000Z",
      "reviewAction": "approve",
      "reviewComment": "åŒæ„å¼€å‘è¯¥ç»„ä»¶"
    },
    "componentVersionId": null,
    "existingVersionId": null,
    "applicant": {
      "id": 1,
      "username": "developer"
    },
    "reviewer": {
      "id": 2,
      "username": "admin"
    },
    "submittedAt": null,
    "reviewedAt": "2026-01-08T11:00:00.000Z",
    "completedAt": null,
    "createdAt": "2026-01-08T10:00:00.000Z",
    "updatedAt": "2026-01-08T11:00:00.000Z"
  }
}
```

---

### 6.5 ç¼–è¾‘ç”³è¯·ä¿¡æ¯

**PATCH** `/api/development-applications/:applicationNo`

**å‰ææ¡ä»¶ï¼š** çŠ¶æ€å¿…é¡»ä¸º `pending_review`ï¼Œä¸”åªèƒ½ç¼–è¾‘è‡ªå·±çš„ç”³è¯·

#### è¯·æ±‚ä½“

```json
{
  "name": "æ•°æ®è¡¨æ ¼ç»„ä»¶",
  "description": "æ”¯æŒå¤šç§æ•°æ®æºçš„é«˜æ€§èƒ½è¡¨æ ¼",
  "classificationLevel1": "table",
  "classificationLevel2": "data-table",
  "changelog": "åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒåŸºç¡€è¡¨æ ¼åŠŸèƒ½"
}
```

#### å¯ç¼–è¾‘å­—æ®µè§„åˆ™

| å­—æ®µ                 | æ–°ç»„ä»¶ | ç‰ˆæœ¬è¿­ä»£ | æ›¿æ¢ç‰ˆæœ¬ |
| -------------------- | ------ | -------- | -------- |
| name                 | âœ…     | âŒ       | âŒ       |
| description          | âœ…     | âœ…       | âœ…       |
| classificationLevel1 | âœ…     | âŒ       | âŒ       |
| classificationLevel2 | âœ…     | âŒ       | âŒ       |
| changelog            | âœ…     | âœ…       | âœ…       |

#### å“åº”

```json
{
  "message": "æ›´æ–°ç”³è¯·æˆåŠŸ",
  "data": {
    /* DevelopmentApplicationResponseDto */
  }
}
```

---

### 6.6 å¯¼å‡ºå…ƒæ•°æ®æ–‡ä»¶

**GET** `/api/development-applications/:applicationNo/export-meta`

**å‰ææ¡ä»¶ï¼š** çŠ¶æ€å¿…é¡»ä¸º `approved`

#### å“åº”å¤´

```
Content-Type: application/json
Content-Disposition: attachment; filename="component.meta.supplement.json"
```

#### å“åº”ä½“

```json
{
  "id": "DataTable",
  "name": "æ•°æ®è¡¨æ ¼",
  "version": "1.0.0",
  "classification": {
    "level1": "table",
    "level2": "data-table",
    "displayName": {
      "level1": "è¡¨æ ¼ç»„ä»¶",
      "level2": "æ•°æ®è¡¨æ ¼"
    }
  },
  "_metadata": {
    "applicationId": 1,
    "applicationNo": "APP-20260108-0001",
    "exportTime": "2026-01-08T12:00:00.000Z"
  }
}
```

**æ›¿æ¢ç‰ˆæœ¬åœºæ™¯é¢å¤–å­—æ®µï¼š**

```json
{
  "_metadata": {
    "isReplacement": true,
    "originalVersionId": 123
  }
}
```

---

### 6.7 å®¡æ ¸ç”³è¯·

**POST** `/api/development-applications/:applicationNo/review`

**å‰ææ¡ä»¶ï¼š** çŠ¶æ€å¿…é¡»ä¸º `pending_review`ï¼Œä¸èƒ½å®¡æ ¸è‡ªå·±çš„ç”³è¯·

#### è¯·æ±‚ä½“

```json
{
  "reviewAction": "approve",
  "reviewComment": "åŒæ„å¼€å‘è¯¥ç»„ä»¶"
}
```

| å­—æ®µ          | ç±»å‹   | å¿…å¡« | è¯´æ˜                     |
| ------------- | ------ | ---- | ------------------------ |
| reviewAction  | string | âœ…   | `approve` æˆ– `reject`    |
| reviewComment | string | âŒ   | å®¡æ ¸æ„è§ï¼Œæœ€å¤š 1000 å­—ç¬¦ |

#### å“åº”ï¼ˆé€šè¿‡ï¼‰

```json
{
  "message": "å®¡æ ¸é€šè¿‡",
  "data": {
    "developmentStatus": "approved",
    "componentVersionId": null,
    "reviewInfo": {
      "reviewerId": 2,
      "reviewerName": "admin",
      "reviewTime": "2026-01-08T11:00:00.000Z",
      "reviewAction": "approve",
      "reviewComment": "åŒæ„å¼€å‘è¯¥ç»„ä»¶"
    }
  }
}
```

#### å“åº”ï¼ˆé©³å›ï¼‰

```json
{
  "message": "å®¡æ ¸é©³å›",
  "data": {
    "developmentStatus": "rejected",
    "componentVersionId": null,
    "reviewInfo": {
      "reviewerId": 2,
      "reviewerName": "admin",
      "reviewTime": "2026-01-08T11:00:00.000Z",
      "reviewAction": "reject",
      "reviewComment": "è¯¥åˆ†ç±»ä¸‹å·²æœ‰ç±»ä¼¼ç»„ä»¶ï¼Œå»ºè®®å¤ç”¨"
    }
  }
}
```

---

### 6.8 ç®¡ç†å‘˜è‡ªåŠ©å®¡æ‰¹

**POST** `/api/development-applications/:applicationNo/self-approve`

**æƒé™è¦æ±‚ï¼š** `development:application:self-approve`

**è¯´æ˜ï¼š** å…è®¸ç®¡ç†å‘˜å®¡æ‰¹è‡ªå·±åˆ›å»ºçš„ç”³è¯·ï¼ˆå¿«é€Ÿä¸Šä¼ åœºæ™¯ï¼‰

#### è¯·æ±‚ä½“

```json
{
  "reviewAction": "approve",
  "reviewComment": "ç®¡ç†å‘˜è‡ªåŠ©å®¡æ‰¹"
}
```

#### å“åº”

```json
{
  "message": "è‡ªåŠ©å®¡æ‰¹é€šè¿‡",
  "data": {
    "developmentStatus": "approved",
    "componentVersionId": null,
    "reviewInfo": {
      "reviewerId": 1,
      "reviewerName": "admin",
      "reviewTime": "2026-01-08T11:00:00.000Z",
      "reviewAction": "approve",
      "reviewComment": "ç®¡ç†å‘˜è‡ªåŠ©å®¡æ‰¹"
    }
  }
}
```

---

### 6.9 å–æ¶ˆç”³è¯·

**POST** `/api/development-applications/:applicationNo/cancel`

**å‰ææ¡ä»¶ï¼š** çŠ¶æ€å¿…é¡»ä¸º `pending_review`ï¼Œä¸”åªèƒ½å–æ¶ˆè‡ªå·±çš„ç”³è¯·

#### å“åº”

```json
{
  "message": "å–æ¶ˆç”³è¯·æˆåŠŸ",
  "data": {
    "developmentStatus": "cancelled",
    "cancelledAt": "2026-01-08T12:00:00.000Z"
  }
}
```

---

## 7. ç»„ä»¶ä¸Šä¼ æ¥å£

### 7.1 ä¸Šä¼ ç»„ä»¶ ZIP åŒ…

**POST** `/api/components/upload`

**æƒé™è¦æ±‚ï¼š** `component.create`

#### è¯·æ±‚

```
Content-Type: multipart/form-data

file: <ZIP æ–‡ä»¶>
```

#### ä¸Šä¼ è§„åˆ™

| è§„åˆ™     | è¯´æ˜                                                                |
| -------- | ------------------------------------------------------------------- |
| æ–‡ä»¶ç±»å‹ | ä»…æ”¯æŒ `.zip`                                                       |
| æ–‡ä»¶å¤§å° | æœ€å¤§ 50MB                                                           |
| å¿…éœ€æ–‡ä»¶ | `component.meta.supplement.json`ã€`component.meta.json`ã€ä¸»å…¥å£æ–‡ä»¶ |

#### æ ¡éªŒæµç¨‹

1. âœ… éªŒè¯ ZIP æ–‡ä»¶åŸºæœ¬æ ¼å¼
2. âœ… è§£æ `component.meta.supplement.json`
3. âœ… éªŒè¯ supplement ä¸ç ”å‘ç”³è¯·è®°å½•ä¸€è‡´æ€§ï¼ˆapplicationIdã€componentIdã€versionï¼‰
4. âœ… æ£€æŸ¥ç”³è¯·çŠ¶æ€å¿…é¡»ä¸º `APPROVED`
5. âœ… è§£æ `component.meta.json`
6. âœ… éªŒè¯ meta ä¸­å£°æ˜çš„æ–‡ä»¶å­˜åœ¨
7. âœ… éªŒè¯åˆ†ç±»ä¿¡æ¯æœ‰æ•ˆ
8. âœ… ä¸Šä¼ æ–‡ä»¶åˆ° OSS
9. âœ… æ ¹æ®ç”³è¯·ç±»å‹åˆ›å»º/æ›´æ–°è®°å½•
10. âœ… æ›´æ–°ç”³è¯·çŠ¶æ€ä¸º `COMPLETED`

#### å“åº”ï¼ˆæˆåŠŸï¼‰

```json
{
  "message": "ç»„ä»¶ä¸Šä¼ æˆåŠŸï¼ˆæ–°ç»„ä»¶ï¼‰",
  "data": {
    "component": {
      "componentId": "DataTable",
      "name": "æ•°æ®è¡¨æ ¼",
      "description": "é«˜æ€§èƒ½æ•°æ®è¡¨æ ¼ç»„ä»¶",
      "classificationLevel1": "table",
      "classificationLevel2": "data-table",
      "versionCount": 1,
      "publishedVersionCount": 0
    },
    "version": {
      "id": 1,
      "version": "1.0.0",
      "status": "draft",
      "entryUrl": "components/DataTable/1.0.0/index.esm.js",
      "styleUrl": "components/DataTable/1.0.0/style.css",
      "previewUrl": "components/DataTable/1.0.0/assets/preview.png",
      "type": "vue-echarts",
      "framework": "vue3"
    },
    "applicationNo": "APP-20260108-0001",
    "isNewComponent": true,
    "isNewVersion": true,
    "warnings": []
  }
}
```

---

### 7.2 component.meta.supplement.json DTO

```typescript
/** åˆ†ç±»ä¿¡æ¯ */
class SupplementClassificationDto {
  level1: string // ä¸€çº§åˆ†ç±»æ ‡è¯†
  level2: string // äºŒçº§åˆ†ç±»æ ‡è¯†
  displayName: {
    level1: string // ä¸€çº§åˆ†ç±»æ˜¾ç¤ºåç§°
    level2: string // äºŒçº§åˆ†ç±»æ˜¾ç¤ºåç§°
  }
}

/** ç”³è¯·å…ƒæ•°æ® */
class SupplementMetadataDto {
  applicationId: number // ç”³è¯·IDï¼ˆç”¨äºæ ¡éªŒï¼‰
  applicationNo: string // ç”³è¯·å•å·
  exportTime: string // å¯¼å‡ºæ—¶é—´
  signature?: string // ç­¾åï¼ˆå¯é€‰ï¼‰
  isReplacement?: boolean // æ˜¯å¦æ›¿æ¢ç‰ˆæœ¬
  originalVersionId?: number // åŸç‰ˆæœ¬IDï¼ˆæ›¿æ¢åœºæ™¯ï¼‰
}

/** å®Œæ•´ç»“æ„ */
class ComponentSupplementDto {
  id: string // ç»„ä»¶ID
  name: string // ç»„ä»¶åç§°
  version: string // ç‰ˆæœ¬å·
  classification: SupplementClassificationDto
  _metadata: SupplementMetadataDto
}
```

---

### 7.3 component.meta.json DTO

```typescript
/** æ–‡ä»¶ä¿¡æ¯ */
class BuildMetaFilesDto {
  entry: string // ä¸»å…¥å£æ–‡ä»¶ï¼ˆå¿…å¡«ï¼‰
  style?: string // æ ·å¼æ–‡ä»¶
  preview?: string // é¢„è§ˆå›¾
}

/** æ„å»ºä¿¡æ¯ */
class BuildMetaBuildInfoDto {
  buildTime: string // æ„å»ºæ—¶é—´
  hash: string // æ–‡ä»¶å“ˆå¸Œå€¼
  cliVersion: string // CLI ç‰ˆæœ¬
}

/** ä½œè€…ä¿¡æ¯ */
class BuildMetaAuthorDto {
  organization?: string // ç»„ç»‡åç§°
  userName?: string // ç”¨æˆ·å
}

/** å®Œæ•´ç»“æ„ */
class ComponentBuildMetaDto {
  files: BuildMetaFilesDto // æ–‡ä»¶ä¿¡æ¯ï¼ˆå¿…å¡«ï¼‰
  buildInfo: BuildMetaBuildInfoDto // æ„å»ºä¿¡æ¯ï¼ˆå¿…å¡«ï¼‰
  type?: string // ç»„ä»¶ç±»å‹
  framework?: string // å¼€å‘æ¡†æ¶
  author?: BuildMetaAuthorDto // ä½œè€…ä¿¡æ¯
  license?: string // è®¸å¯è¯
  description?: string // ç»„ä»¶æè¿°
}
```

---

## 8. æƒé™æ§åˆ¶

### 8.1 æƒé™å®šä¹‰

| æƒé™ä»£ç                                | æƒé™åç§°      | è¯´æ˜         |
| -------------------------------------- | ------------- | ------------ |
| `development:application:create`       | åˆ›å»ºç ”å‘ç”³è¯·  | å¼€å‘äººå‘˜æƒé™ |
| `development:application:read`         | æŸ¥çœ‹ç”³è¯·      | æ‰€æœ‰äºº       |
| `development:application:update`       | ç¼–è¾‘/å–æ¶ˆç”³è¯· | ç”³è¯·äººæœ¬äºº   |
| `development:application:review`       | å®¡æ ¸ç”³è¯·      | å®¡æ ¸äººå‘˜æƒé™ |
| `development:application:self-approve` | è‡ªåŠ©å®¡æ‰¹      | ç®¡ç†å‘˜æƒé™   |
| `component.create`                     | ä¸Šä¼ ç»„ä»¶      | å¼€å‘äººå‘˜æƒé™ |
| `component.read`                       | æŸ¥çœ‹ç»„ä»¶      | æ‰€æœ‰äºº       |
| `component.delete`                     | åˆ é™¤ç»„ä»¶      | ç®¡ç†å‘˜æƒé™   |

### 8.2 è§’è‰²é…ç½®

| è§’è‰²           | create | read | update | review | self-approve | component.create |
| -------------- | ------ | ---- | ------ | ------ | ------------ | ---------------- |
| **viewer**     | âŒ     | âœ…   | âŒ     | âŒ     | âŒ           | âŒ               |
| **editor**     | âœ…     | âœ…   | âœ…     | âŒ     | âŒ           | âœ…               |
| **admin-test** | âœ…     | âœ…   | âœ…     | âœ…     | âŒ           | âœ…               |
| **admin**      | âœ…     | âœ…   | âœ…     | âœ…     | âœ…           | âœ…               |

---

## 9. ä¸šåŠ¡è§„åˆ™

### 9.1 ç‰ˆæœ¬å·è§„åˆ™

1. **æ ¼å¼ï¼š** éµå¾ª Semver è§„èŒƒï¼ˆå¦‚ï¼š`1.0.0`, `2.1.3`, `1.0.0-beta.1`ï¼‰
2. **æ–°ç»„ä»¶ï¼š** é»˜è®¤ç‰ˆæœ¬ `1.0.0`
3. **ç‰ˆæœ¬è¿­ä»£ï¼š** æ–°ç‰ˆæœ¬å·ä¸èƒ½ä¸å·²æœ‰ç‰ˆæœ¬å†²çª
4. **ç‰ˆæœ¬å”¯ä¸€æ€§ï¼š** åŒä¸€ç»„ä»¶ä¸èƒ½æœ‰é‡å¤ç‰ˆæœ¬å·ï¼ˆæ’é™¤å·²å–æ¶ˆç”³è¯·ï¼‰

### 9.2 çŠ¶æ€æµè½¬è§„åˆ™

| å½“å‰çŠ¶æ€         | å¯æµè½¬çŠ¶æ€  | è§¦å‘æ¡ä»¶ | ç‰ˆæœ¬å·çŠ¶æ€       |
| ---------------- | ----------- | -------- | ---------------- |
| `pending_review` | `approved`  | å®¡æ ¸é€šè¿‡ | ä¿æŒå ç”¨         |
| `pending_review` | `rejected`  | å®¡æ ¸é©³å› | ä¿æŒå ç”¨ï¼ˆç»ˆæ€ï¼‰ |
| `pending_review` | `cancelled` | å–æ¶ˆç”³è¯· | **é‡Šæ”¾ç‰ˆæœ¬å·**   |
| `approved`       | `completed` | ä¸Šä¼ æˆåŠŸ | ä¿æŒå ç”¨         |

### 9.3 ä¸Šä¼ è§„åˆ™

| è§„åˆ™     | è¯´æ˜                                                                |
| -------- | ------------------------------------------------------------------- |
| å‰ææ¡ä»¶ | ç”³è¯·çŠ¶æ€å¿…é¡»ä¸º `APPROVED`                                           |
| æ–‡ä»¶ç±»å‹ | ä»…æ”¯æŒ `.zip` æ ¼å¼                                                  |
| æ–‡ä»¶å¤§å° | æœ€å¤§ 50MB                                                           |
| å¿…éœ€æ–‡ä»¶ | `component.meta.supplement.json`ã€`component.meta.json`ã€ä¸»å…¥å£æ–‡ä»¶ |
| ä¸Šä¼ è·¯å¾„ | ç›´æ¥ä¸Šä¼ åˆ°æ­£å¼è·¯å¾„ `components/{componentId}/{version}/`            |
| å¤±è´¥é‡è¯• | æ ¡éªŒå¤±è´¥æ—¶ä¿æŒ `APPROVED` çŠ¶æ€ï¼Œç”¨æˆ·å¯é‡æ–°ä¸Šä¼                       |

### 9.4 ç”³è¯·ç±»å‹å¤„ç†è§„åˆ™

| ç”³è¯·ç±»å‹  | ç»„ä»¶å¤„ç†     | ç‰ˆæœ¬å¤„ç†            |
| --------- | ------------ | ------------------- |
| `new`     | åˆ›å»ºæ–°ç»„ä»¶   | åˆ›å»ºæ–°ç‰ˆæœ¬          |
| `version` | è·å–å·²æœ‰ç»„ä»¶ | åˆ›å»ºæ–°ç‰ˆæœ¬          |
| `replace` | è·å–å·²æœ‰ç»„ä»¶ | æ›¿æ¢å·²æœ‰ draft ç‰ˆæœ¬ |

### 9.5 å–æ¶ˆè§„åˆ™

| çŠ¶æ€             | æ˜¯å¦å¯å–æ¶ˆ | è¯´æ˜                             |
| ---------------- | ---------- | -------------------------------- |
| `pending_review` | âœ…         | å¾…å®¡æ ¸çŠ¶æ€å¯å–æ¶ˆï¼Œç‰ˆæœ¬å·é‡Šæ”¾     |
| `approved`       | âŒ         | å®¡æ ¸é€šè¿‡åä¸å¯å–æ¶ˆï¼ˆå¯é‡æ–°ä¸Šä¼ ï¼‰ |
| `rejected`       | âŒ         | ç»ˆæ€                             |
| `completed`      | âŒ         | ç»ˆæ€                             |
| `cancelled`      | âŒ         | ç»ˆæ€                             |

### 9.6 ç¼–è¾‘è§„åˆ™

| çŠ¶æ€             | æ˜¯å¦å¯ç¼–è¾‘ | è¯´æ˜               |
| ---------------- | ---------- | ------------------ |
| `pending_review` | âœ…         | å¾…å®¡æ ¸çŠ¶æ€å¯ç¼–è¾‘   |
| `approved`       | âŒ         | å®¡æ ¸é€šè¿‡åä¸å¯ç¼–è¾‘ |
| `rejected`       | âŒ         | ç»ˆæ€               |
| `completed`      | âŒ         | ç»ˆæ€               |
| `cancelled`      | âŒ         | ç»ˆæ€               |
