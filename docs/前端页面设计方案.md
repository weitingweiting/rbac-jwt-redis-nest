# ç»„ä»¶ç®¡ç†æ¨¡å— - å‰ç«¯é¡µé¢è®¾è®¡æ–¹æ¡ˆ

> **åŸºäºåç«¯ API è®¾è®¡**
> **æ—¥æœŸ**: 2026å¹´1æœˆ5æ—¥
> **ç‰ˆæœ¬**: v1.0

---

## ğŸ“‹ ç›®å½•

1. [åç«¯ API æ€»è§ˆ](#åç«¯-api-æ€»è§ˆ)
2. [å‰ç«¯é¡µé¢æ¶æ„](#å‰ç«¯é¡µé¢æ¶æ„)
3. [è¯¦ç»†é¡µé¢è®¾è®¡](#è¯¦ç»†é¡µé¢è®¾è®¡)
4. [ç”¨æˆ·è§’è‰²ä¸æƒé™](#ç”¨æˆ·è§’è‰²ä¸æƒé™)
5. [äº¤äº’æµç¨‹å›¾](#äº¤äº’æµç¨‹å›¾)
6. [æŠ€æœ¯å»ºè®®](#æŠ€æœ¯å»ºè®®)

---

## ğŸ”Œ åç«¯ API æ€»è§ˆ

### å·²å®ç°çš„ Controller

#### 1ï¸âƒ£ ComponentsControllerï¼ˆç»„ä»¶ç®¡ç†ï¼‰

| æ–¹æ³•   | è·¯å¾„                           | åŠŸèƒ½                   | å‰ç«¯ç”¨é€”                 |
| ------ | ------------------------------ | ---------------------- | ------------------------ |
| GET    | `/api/components`              | ç»„ä»¶åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ï¼‰ | **ç»„ä»¶åº“é¡µé¢**çš„åˆ—è¡¨å±•ç¤º |
| GET    | `/api/components/:componentId` | ç»„ä»¶è¯¦æƒ…               | **ç»„ä»¶è¯¦æƒ…é¡µ**çš„æ•°æ®æº   |
| POST   | `/api/components/upload`       | ä¸Šä¼  ZIP åŒ…            | **ä¸Šä¼ ç»„ä»¶**åŠŸèƒ½         |
| DELETE | `/api/components/:componentId` | åˆ é™¤ç»„ä»¶               | **ç»„ä»¶ç®¡ç†**åˆ é™¤æ“ä½œ     |

**å…³é”®ç‰¹æ€§**:

- æ”¯æŒæŒ‰åˆ†ç±»ã€å…³é”®è¯ã€å‘å¸ƒçŠ¶æ€ç­›é€‰
- ä¸Šä¼ æ—¶è‡ªåŠ¨è§£æ meta.jsonï¼Œæ— éœ€æ‰‹åŠ¨é€‰æ‹©åˆ†ç±»
- è¿”å›ç‰ˆæœ¬ä¿¡æ¯ï¼ˆisNewComponent, isNewVersionï¼‰

---

#### 2ï¸âƒ£ ComponentVersionsControllerï¼ˆç‰ˆæœ¬ç®¡ç†ï¼‰

| æ–¹æ³•   | è·¯å¾„                                            | åŠŸèƒ½     | å‰ç«¯ç”¨é€”         |
| ------ | ----------------------------------------------- | -------- | ---------------- |
| GET    | `/api/components/:componentId/versions`         | ç‰ˆæœ¬åˆ—è¡¨ | **ç‰ˆæœ¬å†å²**å±•ç¤º |
| GET    | `/api/component-versions/:versionId`            | ç‰ˆæœ¬è¯¦æƒ… | **ç‰ˆæœ¬è¯¦æƒ…**é¡µé¢ |
| POST   | `/api/component-versions/:versionId/publish`    | å‘å¸ƒç‰ˆæœ¬ | **å®¡æ ¸å‘å¸ƒ**æ“ä½œ |
| POST   | `/api/component-versions/:versionId/set-latest` | è®¾ä¸ºæ¨è | **æ¨èç‰ˆæœ¬**è®¾ç½® |
| DELETE | `/api/component-versions/:versionId`            | åˆ é™¤ç‰ˆæœ¬ | **ç‰ˆæœ¬ç®¡ç†**åˆ é™¤ |

**å…³é”®ç‰¹æ€§**:

- ç‰ˆæœ¬çŠ¶æ€: draftï¼ˆè‰ç¨¿ï¼‰â†’ publishedï¼ˆå·²å‘å¸ƒï¼‰
- æ¨èç‰ˆæœ¬: å‰ç«¯ç”»å¸ƒä½¿ç”¨ `is_latest=true` çš„ç‰ˆæœ¬
- ç‰ˆæœ¬ä¸å¯å˜æ€§: published ç‰ˆæœ¬ä¸èƒ½å†ä¸Šä¼ è¦†ç›–

---

#### 3ï¸âƒ£ ComponentCategoriesControllerï¼ˆåˆ†ç±»ç®¡ç†ï¼‰

| æ–¹æ³•   | è·¯å¾„                             | åŠŸèƒ½             | å‰ç«¯ç”¨é€”                       |
| ------ | -------------------------------- | ---------------- | ------------------------------ |
| GET    | `/api/component-categories/tree` | åˆ†ç±»æ ‘           | **ç­›é€‰ä¸‹æ‹‰æ¡†**ã€**åˆ†ç±»é€‰æ‹©å™¨** |
| GET    | `/api/component-categories`      | åˆ†ç±»åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰ | **åˆ†ç±»ç®¡ç†é¡µ**                 |
| GET    | `/api/component-categories/:id`  | åˆ†ç±»è¯¦æƒ…         | åˆ†ç±»ç¼–è¾‘è¡¨å•                   |
| POST   | `/api/component-categories`      | åˆ›å»ºåˆ†ç±»         | **ç®¡ç†å‘˜**åˆ›å»ºåˆ†ç±»             |
| PUT    | `/api/component-categories/:id`  | æ›´æ–°åˆ†ç±»         | **ç®¡ç†å‘˜**ç¼–è¾‘åˆ†ç±»             |
| DELETE | `/api/component-categories/:id`  | åˆ é™¤åˆ†ç±»         | **ç®¡ç†å‘˜**åˆ é™¤åˆ†ç±»             |

**å…³é”®ç‰¹æ€§**:

- ä¸¤çº§åˆ†ç±»ç»“æ„ï¼ˆä¸€çº§åˆ†ç±» + äºŒçº§åˆ†ç±»ï¼‰
- åˆ†ç±»æ ‘ç”¨äºå‰ç«¯ç­›é€‰ï¼Œæ— éœ€ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©ï¼ˆmeta.json å†³å®šï¼‰
- åˆ†ç±»ç®¡ç†ä¸»è¦æ˜¯ç®¡ç†å‘˜åŠŸèƒ½

---

## ğŸ¨ å‰ç«¯é¡µé¢æ¶æ„

### æ•´ä½“ç»“æ„å»ºè®®ï¼ˆæœ€ç»ˆæ–¹æ¡ˆï¼šåˆ†ç¦»å¼è®¾è®¡ï¼‰

```
/components
â”œâ”€â”€ /library          ã€ç»„ä»¶åº“ã€‘- æ™®é€šç”¨æˆ·æµè§ˆï¼ˆå¡ç‰‡è§†å›¾ï¼‰
â”‚   â””â”€â”€ index.vue           n-card å¡ç‰‡å±•ç¤ºï¼Œæ”¯æŒæœç´¢ç­›é€‰
â”‚
â”œâ”€â”€ /manage           ã€ç»„ä»¶ç®¡ç†ã€‘- ç®¡ç†å‘˜ç®¡ç†ï¼ˆæ ‘å½¢è¡¨æ ¼ï¼‰
â”‚   â””â”€â”€ index.vue           åˆ†ç±»+ç»„ä»¶+ç‰ˆæœ¬æ ‘å½¢è¡¨æ ¼ï¼Œæ”¯æŒè¡Œå†…æ“ä½œ
â”‚
â”œâ”€â”€ /detail           ã€ç»„ä»¶è¯¦æƒ…é¡µã€‘- æ‰€æœ‰ç”¨æˆ·
â”‚   â””â”€â”€ [id].vue            ç»„ä»¶è¯¦æƒ…+ç‰ˆæœ¬å†å²
â”‚
â”œâ”€â”€ /upload           ã€ä¸Šä¼ ç»„ä»¶ã€‘- å¼€å‘è€…
â”‚   â””â”€â”€ index.vue           ZIP åŒ…ä¸Šä¼ ç•Œé¢
â”‚
â””â”€â”€ /my-components    ã€æˆ‘çš„ç»„ä»¶ã€‘- å¼€å‘è€…
    â””â”€â”€ index.vue           ä¸ªäººä¸Šä¼ çš„ç»„ä»¶åˆ—è¡¨
```

**è®¾è®¡ç†å¿µ**:

- **library é¡µé¢ï¼ˆæ™®é€šç”¨æˆ·ï¼‰**ï¼šä½¿ç”¨ `n-card` å¡ç‰‡è§†å›¾ï¼Œè§†è§‰å‹å¥½ï¼Œä¾¿äºæµè§ˆ
- **manage é¡µé¢ï¼ˆç®¡ç†å‘˜ï¼‰**ï¼šä½¿ç”¨ `n-data-table` æ ‘å½¢è¡¨æ ¼ + `overview API`ï¼Œé«˜æ•ˆç®¡ç†
- ä¸¤ç§é¡µé¢æ»¡è¶³ä¸åŒç”¨æˆ·ç¾¤ä½“çš„éœ€æ±‚ï¼Œä½“éªŒæœ€ä¼˜åŒ–

---

## ğŸ“„ è¯¦ç»†é¡µé¢è®¾è®¡

### ğŸ”· 1. ç»„ä»¶åº“é¡µé¢ï¼ˆComponent Libraryï¼‰- å¡ç‰‡è§†å›¾

**è·¯ç”±**: `/components/library`

**ç›®æ ‡ç”¨æˆ·**: æ™®é€šç”¨æˆ·ã€å¼€å‘è€…ï¼ˆæµè§ˆç»„ä»¶ï¼‰

**æŠ€æœ¯æ ˆ**: Naive UI `n-card` + `n-grid`

**æ•°æ®æ¥æº**: `GET /api/components` (åˆ†é¡µæ¥å£)

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»„ä»¶åº“                                    [+ ä¸Šä¼ ç»„ä»¶]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” æœç´¢: [è¾“å…¥ç»„ä»¶å...] [æœç´¢]                          â”‚
â”‚  ğŸ“‚ ç­›é€‰: [åˆ†ç±»çº§è”é€‰æ‹©å™¨â–¼] [çŠ¶æ€â–¼] [æ¡†æ¶â–¼] [æ’åºâ–¼]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“Š      â”‚  â”‚ ğŸ“ˆ      â”‚  â”‚ ğŸ¥§      â”‚  â”‚ ğŸ“Š      â”‚   â”‚
â”‚  â”‚ BarChartâ”‚  â”‚LineChartâ”‚  â”‚PieChart â”‚  â”‚Scatter  â”‚   â”‚
â”‚  â”‚ æŸ±çŠ¶å›¾  â”‚  â”‚ æŠ˜çº¿å›¾  â”‚  â”‚ é¥¼å›¾    â”‚  â”‚ æ•£ç‚¹å›¾  â”‚   â”‚
â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚   â”‚
â”‚  â”‚ Vue 3   â”‚  â”‚ React   â”‚  â”‚ Vue 3   â”‚  â”‚ React   â”‚   â”‚
â”‚  â”‚ v1.2.0  â”‚  â”‚ v2.0.1  â”‚  â”‚ v1.0.0  â”‚  â”‚ v3.1.0  â”‚   â”‚
â”‚  â”‚ â­æ¨è   â”‚  â”‚ â­æ¨è   â”‚  â”‚ âœ…å·²å‘å¸ƒ  â”‚  â”‚ â­æ¨è   â”‚   â”‚
â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚   â”‚
â”‚  â”‚ [æŸ¥çœ‹è¯¦æƒ…]â”‚  â”‚ [æŸ¥çœ‹è¯¦æƒ…]â”‚  â”‚ [æŸ¥çœ‹è¯¦æƒ…]â”‚  â”‚ [æŸ¥çœ‹è¯¦æƒ…]â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ...     â”‚  â”‚ ...     â”‚  â”‚ ...     â”‚  â”‚ ...     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Â« ä¸Šä¸€é¡µ  1 2 3 4 5  ä¸‹ä¸€é¡µ Â»          å…± 200 ä¸ªç»„ä»¶    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### æ ¸å¿ƒåŠŸèƒ½å®ç°

#### 1. å‰ç«¯å®ç°ï¼ˆVue 3 + Naive UIï¼‰

```vue
<!-- ComponentLibrary.vue -->
<template>
  <div class="component-library">
    <n-space vertical :size="16">
      <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
      <n-space justify="space-between">
        <n-h2>ç»„ä»¶åº“</n-h2>
        <n-button
          v-if="hasPermission('component.create')"
          type="primary"
          @click="handleUpload"
        >
          + ä¸Šä¼ ç»„ä»¶
        </n-button>
      </n-space>

      <!-- æœç´¢å’Œç­›é€‰ -->
      <n-card>
        <n-space vertical :size="12">
          <!-- æœç´¢æ¡† -->
          <n-input
            v-model:value="searchKeyword"
            placeholder="æœç´¢ç»„ä»¶åç§°ã€æè¿°..."
            clearable
            @input="handleSearch"
          >
            <template #prefix>
              <n-icon :component="SearchOutline" />
            </template>
          </n-input>

          <!-- ç­›é€‰å™¨ -->
          <n-space>
            <n-cascader
              v-model:value="filters.classification"
              placeholder="é€‰æ‹©åˆ†ç±»"
              :options="categoryOptions"
              clearable
              style="width: 200px"
              @update:value="handleFilter"
            />
            <n-select
              v-model:value="filters.status"
              placeholder="çŠ¶æ€"
              :options="statusOptions"
              clearable
              style="width: 150px"
              @update:value="handleFilter"
            />
            <n-select
              v-model:value="filters.framework"
              placeholder="æ¡†æ¶"
              :options="frameworkOptions"
**é¡µé¢å¸ƒå±€**:

```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç»„ä»¶ç®¡ç† [+ ä¸Šä¼ ç»„ä»¶] [+ æ–°å»ºåˆ†ç±»] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” æœç´¢: [è¾“å…¥ç»„ä»¶åæˆ–åˆ†ç±»...] [æœç´¢] â”‚
â”‚ ğŸ“‚ ç­›é€‰: [çŠ¶æ€â–¼] [æ¡†æ¶â–¼] [åˆ›å»ºè€…â–¼] [æ¸…ç©ºç­›é€‰] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â–¼] ğŸ“Š å›¾è¡¨ (chart) [ç¼–è¾‘] [åˆ é™¤] â”‚
â”‚ [â–¼] ğŸ“Š æŸ±çŠ¶å›¾ (chart.bar) [ç¼–è¾‘] [åˆ é™¤] â”‚
â”‚ [â–¼] BarChart Vue 3 å¼ ä¸‰ 2026-01-05 [è¯¦æƒ…] [åˆ é™¤] â”‚
â”‚ â”œâ”€ v1.3.0 ğŸ”§è‰ç¨¿ 128KB 2026-01-05 [å‘å¸ƒ] [åˆ é™¤] â”‚
â”‚ â”œâ”€ v1.2.0 â­æ¨è 128KB 2026-01-01 [å–æ¶ˆæ¨è] [è¯¦æƒ…] â”‚
â”‚ â””â”€ v1.1.0 âœ…å·²å‘å¸ƒ 120KB 2025-12-20 [è®¾ä¸ºæ¨è] [åˆ é™¤] â”‚
â”‚ [â–¶] ğŸ“ˆ æŠ˜çº¿å›¾ (chart.line) [ç¼–è¾‘] [åˆ é™¤] â”‚
â”‚ [â–¶] ğŸ¥§ é¥¼å›¾ (chart.pie) [ç¼–è¾‘] [åˆ é™¤] â”‚
â”‚ [â–¶] ğŸ“ è¡¨å• (form) å·²æ”¶èµ· [ç¼–è¾‘] [åˆ é™¤] â”‚
â”‚ [â–¶] ğŸ“¦ å®¹å™¨ (container) å·²æ”¶èµ· [ç¼–è¾‘] [åˆ é™¤] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ˜¾ç¤º 640 æ¡æ•°æ®ï¼ˆ10 ä¸ªåˆ†ç±»ï¼Œ200 ä¸ªç»„ä»¶ï¼Œ600 ä¸ªç‰ˆæœ¬ï¼‰

````

---

### æ ¸å¿ƒåŠŸèƒ½å®ç°

#### 1. åç«¯ APIï¼š`GET /api/components/overview`

```typescript
// ComponentsController
@Get('overview')
@RequirePermissions('component.read')
async getOverview(@Query() query: ComponentOverviewDto) {
  return this.componentsService.getComponentOverview(query)
}

// è¿”å›æ•°æ®ç»“æ„
{
  "data": [
    {
      "key": "category-chart",
      "type": "category",
      "level": 1,
      "name": "å›¾è¡¨",
      "code": "chart",
      "icon": "ğŸ“Š",
      "children": [
        {
          "key": "category-chart.bar",
          "type": "category",
          "level": 2,
          "name": "æŸ±çŠ¶å›¾",
          "code": "chart.bar",
          "icon": "ğŸ“Š",
          "children": [
            {
              "key": "component-1",
              "type": "component",
              "id": 1,
              "name": "BarChart",
              "displayName": "æŸ±çŠ¶å›¾ç»„ä»¶",
              "framework": "Vue 3",
              "createdBy": "å¼ ä¸‰",
              "createdAt": "2026-01-05",
              "publishedVersionCount": 2,
              "totalVersionCount": 3,
              "children": [
                {
                  "key": "version-101",
                  "type": "version",
                  "id": 101,
                  "version": "v1.3.0",
                  "status": "draft",
                  "isLatest": false,
                  "fileSize": 131072,
                  "createdAt": "2026-01-05"
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
````

---

#### 2. å‰ç«¯å®ç°ï¼ˆVue 3 + Naive UIï¼‰

```vue
<!-- ComponentManagement
            <n-select
              v-model:value="sortBy"
              placeholder="æ’åº"
              :options="sortOptions"
              style="width: 150px"
              @update:value="handleSort"
            />
          </n-space>
        </n-space>
      </n-card>

      <!-- ç»„ä»¶å¡ç‰‡ç½‘æ ¼ -->
      <n-spin :show="loading">
        <n-grid :x-gap="16" :y-gap="16" :cols="4" responsive="screen">
          <n-grid-item v-for="component in components" :key="component.id">
            <n-card
              :title="component.displayName"
              hoverable
              @click="handleViewDetail(component.id)"
              style="cursor: pointer"
            >
              <!-- ç»„ä»¶å›¾æ ‡/é¢„è§ˆå›¾ -->
              <template #cover>
                <div class="component-preview">
                  <img
                    v-if="component.previewUrl"
                    :src="component.previewUrl"
                    :alt="component.name"
                  />
                  <div v-else class="placeholder-icon">
                    {{ component.icon || 'ğŸ“¦' }}
                  </div>
                </div>
              </template>

              <!-- ç»„ä»¶ä¿¡æ¯ -->
              <n-space vertical :size="8">
                <n-text depth="3">{{ component.name }}</n-text>

                <!-- åˆ†ç±»æ ‡ç­¾ -->
                <n-space :size="4">
                  <n-tag size="small" type="info">
                    {{ component.classificationLevel1Name }}
                  </n-tag>
                  <n-tag v-if="component.classificationLevel2Name" size="small">
                    {{ component.classificationLevel2Name }}
                  </n-tag>
                </n-space>

                <!-- æè¿° -->
                <n-ellipsis :line-clamp="2">
                  {{ component.description || 'æš‚æ— æè¿°' }}
                </n-ellipsis>

                <!-- åº•éƒ¨ä¿¡æ¯ -->
                <n-space justify="space-between" align="center">
                  <n-space :size="4">
                    <n-tag size="small" :type="getFrameworkType(component.framework)">
                      {{ component.framework }}
                    </n-tag>
                    <n-tag size="small">
                      {{ component.latestVersion }}
                    </n-tag>
                  </n-space>

                  <!-- çŠ¶æ€æ ‡ç­¾ -->
                  <n-tag
                    v-if="component.hasLatestVersion"
                    size="small"
                    type="primary"
                  >
                    â­æ¨è
                  </n-tag>
                  <n-tag
                    v-else-if="component.hasPublishedVersion"
                    size="small"
                    type="success"
                  >
                    âœ…å·²å‘å¸ƒ
                  </n-tag>
                  <n-tag v-else size="small" type="warning">
                    ğŸ”§è‰ç¨¿
                  </n-tag>
                </n-space>
              </n-space>

              <!-- æ“ä½œæŒ‰é’® -->
              <template #action>
                <n-button
                  type="primary"
                  size="small"
                  block
                  @click.stop="handleViewDetail(component.id)"
                >
                  æŸ¥çœ‹è¯¦æƒ…
                </n-button>
              </template>
            </n-card>
          </n-grid-item>
        </n-grid>

        <!-- ç©ºçŠ¶æ€ -->
        <n-empty
          v-if="!loading && components.length === 0"
          description="æš‚æ— ç»„ä»¶"
          style="margin-top: 60px"
        />
      </n-spin>

      <!-- åˆ†é¡µ -->
      <n-pagination
        v-model:page="pagination.page"
        v-model:page-size="pagination.pageSize"
        :item-count="pagination.total"
        :page-sizes="[12, 24, 36, 48]"
        show-size-picker
        @update:page="handlePageChange"
        @update:page-size="handlePageSizeChange"
      >
        <template #suffix>
          å…± {{ pagination.total }} ä¸ªç»„ä»¶
        </template>
      </n-pagination>
    </n-space>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { useMessage } from 'naive-ui'
import { SearchOutline } from '@vicons/ionicons5'
import { useComponentStore } from '@/stores/componentStore'
import { useAuthStore } from '@/stores/authStore'

const router = useRouter()
const message = useMessage()
const componentStore = useComponentStore()
const authStore = useAuthStore()

// æ•°æ®
const loading = ref(false)
const components = ref([])
const searchKeyword = ref('')
const filters = ref({
  classification: null,
  status: null,
  framework: null
})
const sortBy = ref('updated_desc')
const pagination = ref({
  page: 1,
  pageSize: 12,
  total: 0
})

// åˆ†ç±»é€‰é¡¹ï¼ˆä» API è·å–ï¼‰
const categoryOptions = ref([])

// ç­›é€‰é€‰é¡¹
const statusOptions = [
  { label: 'æœ‰æ¨èç‰ˆæœ¬', value: 'hasLatest' },
  { label: 'æœ‰å·²å‘å¸ƒç‰ˆæœ¬', value: 'hasPublished' },
  { label: 'ä»…è‰ç¨¿', value: 'draftOnly' }
]

const frameworkOptions = [
  { label: 'Vue 3', value: 'Vue 3' },
  { label: 'React', value: 'React' },
  { label: 'Angular', value: 'Angular' }
]

const sortOptions = [
  { label: 'æœ€è¿‘æ›´æ–°', value: 'updated_desc' },
  { label: 'æœ€æ—©æ›´æ–°', value: 'updated_asc' },
  { label: 'åç§° A-Z', value: 'name_asc' },
  { label: 'åç§° Z-A', value: 'name_desc' }
]

// æƒé™æ£€æŸ¥
const hasPermission = (permission: string) => {
  return authStore.hasPermission(permission)
}

// è·å–æ¡†æ¶æ ‡ç­¾ç±»å‹
const getFrameworkType = (framework: string) => {
  const types = {
    'Vue 3': 'success',
    'React': 'info',
    'Angular': 'error'
  }
  return types[framework] || 'default'
}

// åŠ è½½åˆ†ç±»æ ‘
const loadCategories = async () => {
  try {
    const { data } = await componentStore.fetchCategoryTree()
    categoryOptions.value = data.map(level1 => ({
      label: level1.name,
      value: level1.code,
      children: level1.children?.map(level2 => ({
        label: level2.name,
        value: level2.code
      }))
    }))
  } catch (error) {
    message.error('åŠ è½½åˆ†ç±»å¤±è´¥')
  }
}

// åŠ è½½ç»„ä»¶åˆ—è¡¨
const loadComponents = async () => {
  loading.value = true
  try {
    const params = {
      keyword: searchKeyword.value,
      page: pagination.value.page,
      limit: pagination.value.pageSize,
      sortBy: sortBy.value
    }

    // æ·»åŠ ç­›é€‰æ¡ä»¶
    if (filters.value.classification) {
      const [level1, level2] = filters.value.classification
      params.classificationLevel1 = level1
      if (level2) params.classificationLevel2 = level2
    }

    if (filters.value.status === 'hasLatest') {
      params.hasLatestVersion = true
    } else if (filters.value.status === 'hasPublished') {
      params.hasPublishedVersion = true
    } else if (filters.value.status === 'draftOnly') {
      params.hasPublishedVersion = false
    }

    if (filters.value.framework) {
      params.framework = filters.value.framework
    }

    const { data } = await componentStore.fetchComponents(params)
    components.value = data.data
    pagination.value.total = data.total
  } catch (error) {
    message.error('åŠ è½½å¤±è´¥')
  } finally {
    loading.value = false
  }
}

// äº‹ä»¶å¤„ç†
const handleSearch = () => {
  pagination.value.page = 1
  loadComponents()
}

const handleFilter = () => {
  pagination.value.page = 1
  loadComponents()
}

const handleSort = () => {
  loadComponents()
}

const handlePageChange = (page: number) => {
  pagination.value.page = page
  loadComponents()
}

const handlePageSizeChange = (pageSize: number) => {
  pagination.value.pageSize = pageSize
  pagination.value.page = 1
  loadComponents()
}

const handleViewDetail = (componentId: number) => {
  router.push(`/components/detail/${componentId}`)
}

const handleUpload = () => {
  router.push('/components/upload')
}

onMounted(() => {
  loadCategories()
  loadComponents()
})
</script>

<style scoped>
.component-preview {
  height: 160px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f5f5f5;
}

.component-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.placeholder-icon {
  font-size: 48px;
}
</style>
```

---

### ğŸ”· 2. ç»„ä»¶ç®¡ç†é¡µé¢ï¼ˆComponent Managementï¼‰- æ ‘å½¢è¡¨æ ¼

**è·¯ç”±**: `/components/manage`

**ç›®æ ‡ç”¨æˆ·**: ç®¡ç†å‘˜

**æŠ€æœ¯æ ˆ**: Naive UI `n-data-table` æ ‘å½¢æ•°æ®

**æ•°æ®æ¥æº**: `GET /api/components/overview` (æ–°æ¥å£ï¼Œä¸€æ¬¡æ€§è¿”å›å®Œæ•´æ ‘)

```typescript
// ComponentsController
@Get('overview')
@RequirePermissions('component.read')
async getOverview(@Query() query: ComponentOverviewDto) {
  return this.componentsService.getComponentOverview(query)
}

// è¿”å›æ•°æ®ç»“æ„
{
  "data": [
    {
      "key": "category-chart",
      "type": "category",
      "level": 1,
      "name": "å›¾è¡¨",
      "code": "chart",
      "icon": "ğŸ“Š",
      "children": [
        {
          "key": "category-chart.bar",
          "type": "category",
          "level": 2,
          "name": "æŸ±çŠ¶å›¾",
          "code": "chart.bar",
          "icon": "ğŸ“Š",
          "children": [
            {
**è·¯ç”±**: `/components/detail
              "name": "BarChart",
              "displayName": "æŸ±çŠ¶å›¾ç»„ä»¶",
              "framework": "Vue 3",
              "createdBy": "å¼ ä¸‰",
              "createdAt": "2026-01-05",
              "publishedVersionCount": 2,
              "totalVersionCount": 3,
              "children": [
                {
                  "key": "version-101",
                  "type": "version",
                  "id": 101,
                  "version": "v1.3.0",
                  "status": "draft",
                  "isLatest": false,
                  "fileSize": 131072,
                  "createdAt": "2026-01-05"
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
```

---

#### 2. å‰ç«¯å®ç°ï¼ˆVue 3 + Naive UIï¼‰

```vue
<!-- ComponentOverview.vue -->
<template>
  <div class="component-overview">
    <n-space vertical :size="16">
      <!-- é¡¶éƒ¨æ“ä½œæ  -->
      <n-space justify="space-between">
        <n-h2>ç»„ä»¶æ€»è§ˆ</n-h2>
        <n-space>
          <n-button v-if="hasPermission('component.create')" type="primary" @click="handleUpload">
            + ä¸Šä¼ ç»„ä»¶
          </n-button>
          <n-button v-if="hasPermission('component.create')" @click="handleCreateCategory">
            + æ–°å»ºåˆ†ç±»
          </n-button>
        </n-space>
      </n-space>

      <!-- æœç´¢å’Œç­›é€‰ -->
      <n-card>
        <n-space vertical :size="12">
          <!-- æœç´¢æ¡† -->
          <n-input
            v-model:value="searchKeyword"
            placeholder="æœç´¢ç»„ä»¶åã€åˆ†ç±»åã€åˆ›å»ºè€…..."
            clearable
            @input="handleSearch"
          >
            <template #prefix>
              <n-icon :component="SearchOutline" />
            </template>
          </n-input>

          <!-- ç­›é€‰å™¨ -->
          <n-space>
            <n-select
              v-model:value="filters.status"
              placeholder="çŠ¶æ€"
              :options="statusOptions"
              clearable
              style="width: 150px"
              @update:value="handleFilter"
            />
            <n-select
              v-model:value="filters.framework"
              placeholder="æ¡†æ¶"
              :options="frameworkOptions"
              clearable
              style="width: 150px"
              @update:value="handleFilter"
            />
            <n-button @click="handleClearFilters">æ¸…ç©ºç­›é€‰</n-button>
          </n-space>
        </n-space>
      </n-card>

      <!-- æ ‘å½¢è¡¨æ ¼ -->
      <n-data-table
        :columns="columns"
        :data="filteredData"
        :row-key="(row) => row.key"
        :default-expand-all="false"
        :loading="loading"
        :pagination="false"
        :scroll-x="1400"
        size="small"
      />

      <!-- ç»Ÿè®¡ä¿¡æ¯ -->
      <n-text depth="3">
        æ˜¾ç¤º {{ stats.total }} æ¡æ•°æ® ï¼ˆ{{ stats.categories }} ä¸ªåˆ†ç±»ï¼Œ{{
          stats.components
        }}
        ä¸ªç»„ä»¶ï¼Œ{{ stats.versions }} ä¸ªç‰ˆæœ¬ï¼‰
      </n-text>
    </n-space>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted, h } from 'vue'
import { NButton, NTag, NSpace, useMessage } from 'naive-ui'
import { SearchOutline } from '@vicons/ionicons5'
import { useComponentStore } from '@/stores/componentStore'
import { useAuthStore } from '@/stores/authStore'

const message = useMessage()
const componentStore = useComponentStore()
const authStore = useAuthStore()

// æ•°æ®
const loading = ref(false)
const rawData = ref([])
const searchKeyword = ref('')
const filters = ref({
  status: null,
  framework: null
})

// æƒé™æ£€æŸ¥
const hasPermission = (permission: string) => {
  return authStore.hasPermission(permission)
}

// ç­›é€‰é€‰é¡¹
const statusOptions = [
  { label: 'è‰ç¨¿', value: 'draft' },
  { label: 'å·²å‘å¸ƒ', value: 'published' },
  { label: 'æ¨èç‰ˆæœ¬', value: 'latest' }
]

const f4. ä¸Šä¼ ç»„ä»¶é¡µé¢ï¼ˆComponent Uploadï¼‰

**è·¯ç”±**: `/components/upload`

> ä¿æŒåŸè®¾è®¡ä¸å˜

---

### ğŸ”· 5. æˆ‘çš„ç»„ä»¶é¡µé¢ï¼ˆMy Componentsï¼‰

> ä¿æŒåŸè®¾è®¡ä¸å˜

---

## ğŸ¯ æœ€ç»ˆæ–¹æ¡ˆæ€»ç»“

### âœ… åŒæ¨¡å¼è®¾è®¡ä¼˜åŠ¿

#### Library é¡µé¢ï¼ˆå¡ç‰‡è§†å›¾ï¼‰
- **ç›®æ ‡ç”¨æˆ·**: æ™®é€šç”¨æˆ·ã€å¼€å‘è€…
- **ä½¿ç”¨åœºæ™¯**: æµè§ˆã€æœç´¢ã€æŸ¥æ‰¾ç»„ä»¶
- **æŠ€æœ¯æ–¹æ¡ˆ**: `n-card` + `n-grid` + åˆ†é¡µ
- **ä¼˜åŠ¿**: è§†è§‰å‹å¥½ã€æ˜“äºæµè§ˆã€æ”¯æŒé¢„è§ˆå›¾

#### Manage é¡µé¢ï¼ˆæ ‘å½¢è¡¨æ ¼ï¼‰
- **ç›®æ ‡ç”¨æˆ·**: ç®¡ç†å‘˜
- **ä½¿ç”¨åœºæ™¯**: å®¡æ ¸ã€å‘å¸ƒã€ç®¡ç†ç»„ä»¶å’Œç‰ˆæœ¬
- **æŠ€æœ¯æ–¹æ¡ˆ**: `n-data-table` æ ‘å½¢ + `overview API`
- **ä¼˜åŠ¿**: é«˜æ•ˆæ“ä½œã€å±‚çº§æ¸…æ™°ã€è¡Œå†…ç®¡ç†

### ğŸ“‹ å®ç°æ¸…å•

#### åç«¯ï¼ˆNestJSï¼‰

- [ ] ä¿æŒç°æœ‰ `GET /api/components` æ¥å£ï¼ˆLibrary é¡µé¢ä½¿ç”¨ï¼‰
- [ ] åˆ›å»º `GET /api/components/overview` æ¥å£ï¼ˆManage é¡µé¢ä½¿ç”¨ï¼‰
- [ ] ComponentsService å®ç° `getComponentOverview()` æ–¹æ³•
- [ ] è¿”å›åˆ†ç±»æ ‘ + ç»„ä»¶ + ç‰ˆæœ¬çš„åµŒå¥—ç»“æ„

#### å‰ç«¯ï¼ˆVue 3 + Naive UIï¼‰

**Library é¡µé¢**:
- [ ] åˆ›å»º `ComponentLibrary.vue` é¡µé¢
- [ ] ä½¿ç”¨ `n-card` + `n-grid` å±•ç¤ºç»„ä»¶å¡ç‰‡
- [ ] å®ç°åˆ†é¡µã€æœç´¢ã€ç­›é€‰åŠŸèƒ½
- [ ] æ”¯æŒåˆ†ç±»çº§è”é€‰æ‹©å™¨

**Manage é¡µé¢**:
- [ ] åˆ›å»º `ComponentManagement.vue` é¡µé¢
- [ ] å®ç°é€’å½’æœç´¢è¿‡æ»¤ç®—æ³• `filterTreeData`
- [ ] é…ç½® `n-data-table` æ ‘å½¢æ•°æ®å±•ç¤º
- [ ] å®ç°æƒé™æ§åˆ¶é€»è¾‘
- [ ] æ·»åŠ æ“ä½œæŒ‰é’®ï¼ˆå‘å¸ƒ/è®¾ä¸ºæ¨è/åˆ é™¤ï¼‰

---

## ğŸ“Š ä¸¤ç§é¡µé¢å¯¹æ¯”

| ç‰¹æ€§ | Library é¡µé¢ | Manage é¡µé¢ |
|------|-------------|-------------|
| **ç›®æ ‡ç”¨æˆ·** | æ™®é€šç”¨æˆ·ã€å¼€å‘è€… | ç®¡ç†å‘˜ |
| **è§†å›¾ç±»å‹** | å¡ç‰‡ç½‘æ ¼ | æ ‘å½¢è¡¨æ ¼ |
| **æ•°æ®åŠ è½½** | åˆ†é¡µåŠ è½½ | ä¸€æ¬¡æ€§åŠ è½½ |
| **æ•°æ®é‡** | æ¯é¡µ 12-48 ä¸ª | ~640 æ¡å…¨é‡ |
| **ä¸»è¦æ“ä½œ** | æŸ¥çœ‹è¯¦æƒ… | å‘å¸ƒ/å®¡æ ¸/åˆ é™¤ |
| **å±•ç¤ºå†…å®¹** | ç»„ä»¶å¡ç‰‡ | åˆ†ç±»+ç»„ä»¶+ç‰ˆæœ¬ |
| **æœç´¢ç­›é€‰** | æ”¯æŒ | æ”¯æŒï¼ˆå«é€’å½’ï¼‰ |
| **æƒé™è¦æ±‚** | component.read | component.publish/delete |

---

### ğŸ”· å…¶ä»–è¾…åŠ©é¡µé¢
    width: 100,
    render: (row) => row.type === 'component' ? row.createdBy : '-'
  },
  {
    title: 'æ–‡ä»¶å¤§å°',
    key: 'fileSize',
    width: 100,
    render: (row) => {
      if (row.type === 'version' && row.fileSize) {
        return formatFileSize(row.fileSize)
      }
      return '-'
    }
  },
  {
    title: 'æ—¶é—´',
    key: 'createdAt',
    width: 150,
    render: (row) => row.createdAt || '-'
  },
  {
    title: 'æ“ä½œ',
    key: 'actions',
    width: 280,
    fixed: 'right',
    render: (row) => {
      const buttons = []

      // åˆ†ç±»æ“ä½œ
      if (row.type === 'category' && hasPermission('component.create')) {
        buttons.push(
          h(NButton, {
            size: 'small',
            onClick: () => handleEditCategory(row)
          }, () => 'ç¼–è¾‘'),
          h(NButton, {
            size: 'small',
            type: 'error',
            onClick: () => handleDeleteCategory(row)
          }, () => 'åˆ é™¤')
        )
      }

      // ç»„ä»¶æ“ä½œ
      if (row.type === 'component') {
        buttons.push(
          h(NButton, {
            size: 'small',
            type: 'primary',
            onClick: () => handleViewComponent(row)
          }, () => 'è¯¦æƒ…')
        )

        if (hasPermission('component.delete')) {
          buttons.push(
            h(NButton, {
              size: 'small',
              type: 'error',
              onClick: () => handleDeleteComponent(row)
            }, () => 'åˆ é™¤')
          )
        }
      }

      // ç‰ˆæœ¬æ“ä½œ
      if (row.type === 'version') {
        if (row.status === 'draft' && hasPermission('component.publish')) {
          buttons.push(
            h(NButton, {
              size: 'small',
              type: 'success',
              onClick: () => handlePublishVersion(row)
            }, () => 'å‘å¸ƒ')
          )
        }

        if (row.status === 'published' && !row.isLatest && hasPermission('component.publish')) {
          buttons.push(
            h(NButton, {
              size: 'small',
              onClick: () => handleSetLatestVersion(row)
            }, () => 'è®¾ä¸ºæ¨è')
          )
        }

        if (row.isLatest && hasPermission('component.publish')) {
          buttons.push(
            h(NButton, {
              size: 'small',
              onClick: () => handleUnsetLatestVersion(row)
            }, () => 'å–æ¶ˆæ¨è')
          )
        }

        buttons.push(
          h(NButton, {
            size: 'small',
            onClick: () => handleViewVersion(row)
          }, () => 'è¯¦æƒ…')
        )

        if (hasPermission('component.delete')) {
          buttons.push(
            h(NButton, {
              size: 'small',
              type: 'error',
              onClick: () => handleDeleteVersion(row)
            }, () => 'åˆ é™¤')
          )
        }
      }

      return h(NSpace, { size: 4 }, buttons)
    }
  }
])

// é€’å½’æœç´¢å’Œç­›é€‰
const filterTreeData = (data: any[], keyword: string, filters: any): any[] => {
  return data.reduce((acc, node) => {
    // æ£€æŸ¥å½“å‰èŠ‚ç‚¹æ˜¯å¦åŒ¹é…
    let matched = true

    // å…³é”®è¯æœç´¢
    if (keyword) {
      const searchText = keyword.toLowerCase()
      matched =
        node.name?.toLowerCase().includes(searchText) ||
        node.code?.toLowerCase().includes(searchText) ||
        node.createdBy?.toLowerCase().includes(searchText) ||
        node.version?.toLowerCase().includes(searchText)
    }

    // çŠ¶æ€ç­›é€‰
    if (filters.status) {
      if (node.type === 'version') {
        if (filters.status === 'latest') {
          matched = matched && node.isLatest
        } else {
          matched = matched && node.status === filters.status
        }
      }
    }

    // æ¡†æ¶ç­›é€‰
    if (filters.framework && node.type === 'component') {
      matched = matched && node.framework === filters.framework
    }

    // é€’å½’å¤„ç†å­èŠ‚ç‚¹
    let children = []
    if (node.children && node.children.length > 0) {
      children = filterTreeData(node.children, keyword, filters)
    }

    // å¦‚æœå½“å‰èŠ‚ç‚¹åŒ¹é…æˆ–æœ‰åŒ¹é…çš„å­èŠ‚ç‚¹ï¼Œåˆ™ä¿ç•™
    if (matched || children.length > 0) {
      acc.push({
        ...node,
        children: children.length > 0 ? children : node.children
      })
    }

    return acc
  }, [])
}

// è®¡ç®—è¿‡æ»¤åçš„æ•°æ®
const filteredData = computed(() => {
  if (!searchKeyword.value && !filters.value.status && !filters.value.framework) {
    return rawData.value
  }
  return filterTreeData(rawData.value, searchKeyword.value, filters.value)
})

// ç»Ÿè®¡ä¿¡æ¯
const stats = computed(() => {
  let categories = 0
  let components = 0
  let versions = 0

  const count = (nodes: any[]) => {
    nodes.forEach(node => {
      if (node.type === 'category') categories++
      if (node.type === 'component') components++
      if (node.type === 'version') versions++
      if (node.children) count(node.children)
    })
  }

  count(filteredData.value)

  return {
    total: categories + components + versions,
    categories,
    components,
    versions
  }
})

// åŠ è½½æ•°æ®
const loadData = async () => {
  loading.value = true
  try {
    const { data } = await componentStore.fetchOverview()
    rawData.value = data
  } catch (error) {
    message.error('åŠ è½½å¤±è´¥')
  } finally {
    loading.value = false
  }
}

// äº‹ä»¶å¤„ç†
const handleSearch = () => {
  // å®æ—¶æœç´¢ï¼Œé€šè¿‡ computed è‡ªåŠ¨è¿‡æ»¤
}

const handleFilter = () => {
  // å®æ—¶ç­›é€‰ï¼Œé€šè¿‡ computed è‡ªåŠ¨è¿‡æ»¤
}

const handleClearFilters = () => {
  searchKeyword.value = ''
  filters.value = {
    status: null,
    framework: null
  }
}

const handlePublishVersion = async (row) => {
  try {
    await componentStore.publishVersion(row.id)
    message.success('å‘å¸ƒæˆåŠŸ')
    await loadData()
  } catch (error) {
    message.error('å‘å¸ƒå¤±è´¥')
  }
}

const handleSetLatestVersion = async (row) => {
  try {
    await componentStore.setLatestVersion(row.id)
    message.success('å·²è®¾ä¸ºæ¨èç‰ˆæœ¬')
    await loadData()
  } catch (error) {
    message.error('æ“ä½œå¤±è´¥')
  }
}

const formatFileSize = (bytes: number) => {
  if (bytes < 1024) return bytes + ' B'
  if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(2) + ' KB'
  return (bytes / (1024 * 1024)).toFixed(2) + ' MB'
}

onMounted(() => {
  loadData()
})
</script>
```

---

### å…³é”®æŠ€æœ¯ç‚¹

#### âœ… æœç´¢ç­›é€‰æ”¯æŒ

1. **é€’å½’è¿‡æ»¤ç®—æ³•**: `filterTreeData` å‡½æ•°é€’å½’éå†æ ‘ï¼Œä¿ç•™åŒ¹é…èŠ‚ç‚¹åŠå…¶ç¥–å…ˆèŠ‚ç‚¹
2. **å®æ—¶å“åº”**: ä½¿ç”¨ `computed` è‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°
3. **å¤šæ¡ä»¶ç»„åˆ**: æ”¯æŒå…³é”®è¯ + çŠ¶æ€ + æ¡†æ¶åŒæ—¶ç­›é€‰

#### âœ… æ€§èƒ½ä¼˜åŒ–

1. **ä¸€æ¬¡æ€§åŠ è½½**: 600æ¡æ•°æ®å®Œå…¨å¯ä»¥å®¢æˆ·ç«¯å¤„ç†ï¼Œæ— éœ€åˆ†é¡µ
2. **é»˜è®¤æ”¶èµ·**: `default-expand-all="false"` å‡å°‘åˆå§‹æ¸²æŸ“
3. **è™šæ‹Ÿæ»šåŠ¨**: Naive UI è‡ªå¸¦ï¼Œå¤„ç†å¤§é‡æ•°æ®æ— å‹åŠ›

#### âœ… æƒé™æ§åˆ¶

```typescript
// æ ¹æ®æƒé™åŠ¨æ€æ˜¾ç¤ºæŒ‰é’®
if (hasPermission('component.publish')) {
  // æ˜¾ç¤ºå‘å¸ƒæŒ‰é’®
}
```

---

### ğŸ”· 2. ç»„ä»¶è¯¦æƒ…é¡µï¼ˆç®€åŒ–ç‰ˆï¼‰

**è·¯ç”±**: `/components/library`

**ç›®æ ‡ç”¨æˆ·**: æ‰€æœ‰ç™»å½•ç”¨æˆ·

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” æœç´¢æ¡†: å…³é”®è¯æœç´¢                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‚ åˆ†ç±»ç­›é€‰ï¼ˆçº§è”é€‰æ‹©å™¨ï¼‰   ğŸ·ï¸ çŠ¶æ€ç­›é€‰   ğŸ“Š æ’åº      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ç»„ä»¶å¡ç‰‡â”‚  â”‚ç»„ä»¶å¡ç‰‡â”‚  â”‚ç»„ä»¶å¡ç‰‡â”‚  â”‚ç»„ä»¶å¡ç‰‡â”‚           â”‚
â”‚  â”‚å›¾æ ‡    â”‚  â”‚å›¾æ ‡    â”‚  â”‚å›¾æ ‡    â”‚  â”‚å›¾æ ‡    â”‚           â”‚
â”‚  â”‚åç§°    â”‚  â”‚åç§°    â”‚  â”‚åç§°    â”‚  â”‚åç§°    â”‚           â”‚
â”‚  â”‚æè¿°    â”‚  â”‚æè¿°    â”‚  â”‚æè¿°    â”‚  â”‚æè¿°    â”‚           â”‚
â”‚  â”‚v1.2.0  â”‚  â”‚v2.0.1  â”‚  â”‚v1.0.0  â”‚  â”‚v3.1.0  â”‚           â”‚
â”‚  â”‚â­æ¨è   â”‚  â”‚ğŸ”§è‰ç¨¿  â”‚  â”‚âœ…å‘å¸ƒ  â”‚  â”‚â­æ¨è   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Â« ä¸Šä¸€é¡µ  1 2 3 4 5  ä¸‹ä¸€é¡µ Â»                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒåŠŸèƒ½**:

1. **æœç´¢ä¸ç­›é€‰**

   ```typescript
   // API è°ƒç”¨ç¤ºä¾‹
   GET /api/components?
     keyword=å›¾è¡¨&
     classificationLevel1=chart&
     classificationLevel2=bar&
     hasPublishedVersion=true&
     page=1&
     limit=20
   ```

2. **åˆ†ç±»çº§è”é€‰æ‹©å™¨**

   ```typescript
   // è·å–åˆ†ç±»æ ‘
   const { data: categoryTree } = await api.get('/api/component-categories/tree')

   // æ¸²æŸ“çº§è”é€‰æ‹©å™¨
   <Cascader
     options={categoryTree}
     onChange={handleCategoryChange}
     placeholder="é€‰æ‹©åˆ†ç±»"
   />
   ```

3. **ç»„ä»¶å¡ç‰‡**
   - æ˜¾ç¤ºç»„ä»¶å›¾æ ‡ã€åç§°ã€æè¿°
   - æ˜¾ç¤ºæ¨èç‰ˆæœ¬å·
   - æ ‡è®°çŠ¶æ€ï¼ˆâ­æ¨èã€âœ…å·²å‘å¸ƒã€ğŸ”§è‰ç¨¿ï¼‰
   - ç‚¹å‡»è·³è½¬åˆ°è¯¦æƒ…é¡µ

4. **åˆ‡æ¢è§†å›¾**
   - å¡ç‰‡è§†å›¾ï¼ˆé»˜è®¤ï¼‰
   - åˆ—è¡¨è§†å›¾ï¼ˆè¡¨æ ¼ï¼‰

---

### ğŸ”· 2. ç»„ä»¶è¯¦æƒ…é¡µï¼ˆComponent Detailï¼‰

**è·¯ç”±**: `/components/library/:componentId`

**ç›®æ ‡ç”¨æˆ·**: æ‰€æœ‰ç™»å½•ç”¨æˆ·

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›ç»„ä»¶åº“                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚        â”‚  æŸ±çŠ¶å›¾ç»„ä»¶ (BarChart)                       â”‚
â”‚  â”‚ é¢„è§ˆå›¾ â”‚  åˆ†ç±»: å›¾è¡¨ > æŸ±çŠ¶å›¾                          â”‚
â”‚  â”‚        â”‚  æ¡†æ¶: Vue 3                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  è®¸å¯è¯: MIT                                 â”‚
â”‚                                                          â”‚
â”‚  æè¿°: åŸºäº ECharts çš„é€šç”¨æŸ±çŠ¶å›¾ç»„ä»¶...                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ã€ç‰ˆæœ¬å†å²ã€‘ Tab                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ v1.2.0 â­æ¨è  2026-01-01  [è¯¦æƒ…] [ä½¿ç”¨æ­¤ç‰ˆæœ¬]    â”‚   â”‚
â”‚  â”‚ v1.1.0        2025-12-20  [è¯¦æƒ…]                â”‚   â”‚
â”‚  â”‚ v1.0.0        2025-11-15  [è¯¦æƒ…]                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ã€ä½¿ç”¨è¯´æ˜ã€‘ Tab                                         â”‚
â”‚  - å®‰è£…æ–¹å¼                                              â”‚
â”‚  - å±æ€§é…ç½®                                              â”‚
â”‚  - ç¤ºä¾‹ä»£ç                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒåŠŸèƒ½**:

1. **ç»„ä»¶åŸºæœ¬ä¿¡æ¯**

   ```typescript
   // è·å–ç»„ä»¶è¯¦æƒ…
   const { data: component } = await api.get(`/api/components/${componentId}`)
   ```

2. **ç‰ˆæœ¬å†å²åˆ—è¡¨**

   ```typescript
   // è·å–ç‰ˆæœ¬åˆ—è¡¨
   const { data: versions } = await api.get(
     `/api/components/${componentId}/versions?status=published`
   )

   // æ˜¾ç¤ºç‰ˆæœ¬åˆ—è¡¨
   versions.forEach((v) => {
     if (v.isLatest) {
       // æ ‡è®°ä¸ºæ¨èç‰ˆæœ¬
     }
   })
   ```

3. **ç‰ˆæœ¬è¯¦æƒ…å±•ç¤º**
   - ç‰ˆæœ¬å·ã€å‘å¸ƒæ—¶é—´
   - æ›´æ–°æ—¥å¿—ï¼ˆchangelogï¼‰
   - æ–‡ä»¶æ¸…å•ï¼ˆassets manifestï¼‰
   - ä¸‹è½½é“¾æ¥ï¼ˆOSS URLï¼‰

4. **æ“ä½œæŒ‰é’®**
   - ğŸ”– ä½¿ç”¨æ­¤ç‰ˆæœ¬ï¼ˆå¤åˆ¶ URLï¼‰
   - ğŸ“¥ ä¸‹è½½æºç 
   - ğŸ“Š æŸ¥çœ‹ç»Ÿè®¡

---

### ğŸ”· 3. ä¸Šä¼ ç»„ä»¶é¡µé¢ï¼ˆComponent Uploadï¼‰

**è·¯ç”±**: `/components/upload`

> ä¿æŒåŸè®¾è®¡ä¸å˜

---

### ğŸ”· 4. æˆ‘çš„ç»„ä»¶é¡µé¢ï¼ˆMy Componentsï¼‰

> ä¿æŒåŸè®¾è®¡ä¸å˜

---

## ğŸ¯ æ ‘å½¢è¡¨æ ¼æ–¹æ¡ˆæ€»ç»“

### âœ… ä¼˜åŠ¿

1. **ç»Ÿä¸€è§†å›¾** - ä¸€ä¸ªé¡µé¢æå®šæ‰€æœ‰ç®¡ç†éœ€æ±‚
2. **é«˜æ€§èƒ½** - 600æ¡æ•°æ®å®¢æˆ·ç«¯å¤„ç†æ— å‹åŠ›
3. **æœç´¢ç­›é€‰** - è‡ªå®šä¹‰é€’å½’ç®—æ³•ï¼Œæ”¯æŒå¤šæ¡ä»¶è¿‡æ»¤
4. **æƒé™æ§åˆ¶** - æ ¹æ®è§’è‰²åŠ¨æ€æ˜¾ç¤ºæ“ä½œæŒ‰é’®
5. **æ“ä½œä¾¿æ·** - è¡Œå†…æ“ä½œï¼Œå¿«é€Ÿå‘å¸ƒ/è®¾ç½®æ¨è/åˆ é™¤

### ğŸ“‹ å®ç°æ¸…å•

#### åç«¯ï¼ˆNestJSï¼‰

- [ ] åˆ›å»º `GET /api/components/overview` æ¥å£
- [ ] ComponentsService å®ç° `getComponentOverview()` æ–¹æ³•
- [ ] è¿”å›åˆ†ç±»æ ‘ + ç»„ä»¶ + ç‰ˆæœ¬çš„åµŒå¥—ç»“æ„

#### å‰ç«¯ï¼ˆVue 3 + Naive UIï¼‰

- [ ] åˆ›å»º `ComponentOverview.vue` é¡µé¢
- [ ] å®ç°é€’å½’æœç´¢è¿‡æ»¤ç®—æ³• `filterTreeData`
- [ ] é…ç½® `n-data-table` æ ‘å½¢æ•°æ®å±•ç¤º
- [ ] å®ç°æƒé™æ§åˆ¶é€»è¾‘
- [ ] æ·»åŠ æ“ä½œæŒ‰é’®ï¼ˆå‘å¸ƒ/è®¾ä¸ºæ¨è/åˆ é™¤ï¼‰

---

### ğŸ”· åŸé¡µé¢è®¾è®¡ï¼ˆä¿ç•™ä½œä¸ºå¤‡é€‰ï¼‰

ä»¥ä¸‹æ˜¯ä¹‹å‰è®¾è®¡çš„åˆ†ç¦»å¼é¡µé¢ï¼Œå¯ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆæˆ–æ¸è¿›å¼å®ç°ï¼š

---

### ğŸ”· A. ç»„ä»¶åº“é¡µé¢ï¼ˆComponent Libraryï¼‰- å¤‡é€‰æ–¹æ¡ˆ

**ç›®æ ‡ç”¨æˆ·**: å¼€å‘è€…ï¼ˆæœ‰ `component.create` æƒé™ï¼‰

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸Šä¼ ç»„ä»¶åŒ…                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“¦ æ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼  ZIP æ–‡ä»¶                        â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚  æ”¯æŒçš„æ–‡ä»¶æ ¼å¼: .zip                              â”‚   â”‚
â”‚  â”‚  æœ€å¤§æ–‡ä»¶å¤§å°: 50MB                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  âš ï¸ æ³¨æ„äº‹é¡¹:                                           â”‚
â”‚  â€¢ ZIP åŒ…å¿…é¡»åŒ…å« component.meta.json                   â”‚
â”‚  â€¢ åˆ†ç±»ä¿¡æ¯ç”± meta.json è‡ªåŠ¨è¯†åˆ«ï¼Œæ— éœ€æ‰‹åŠ¨é€‰æ‹©           â”‚
â”‚  â€¢ å¦‚æœç‰ˆæœ¬å·å·²å­˜åœ¨ä¸”ä¸º draftï¼Œå°†è‡ªåŠ¨è¦†ç›–                â”‚
â”‚  â€¢ å¦‚æœç‰ˆæœ¬å·å·²å­˜åœ¨ä¸”ä¸º publishedï¼Œä¸Šä¼ å°†å¤±è´¥            â”‚
â”‚                                                          â”‚
â”‚  [é€‰æ‹©æ–‡ä»¶] [ä¸Šä¼ ]                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š ä¸Šä¼ è¿›åº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 80%                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… ä¸Šä¼ æˆåŠŸï¼                                          â”‚
â”‚  ç»„ä»¶: BarChart                                         â”‚
â”‚  ç‰ˆæœ¬: v1.2.0                                           â”‚
â”‚  çŠ¶æ€: è‰ç¨¿ï¼ˆå¾…å®¡æ ¸ï¼‰                                     â”‚
â”‚                                                          â”‚
â”‚  [æŸ¥çœ‹ç»„ä»¶] [ç»§ç»­ä¸Šä¼ ] [æŸ¥çœ‹æˆ‘çš„ç»„ä»¶]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒåŠŸèƒ½**:

1. **æ–‡ä»¶ä¸Šä¼ ç»„ä»¶**

   ```typescript
   const handleUpload = async (file: File) => {
     const formData = new FormData()
     formData.append('file', file)

     try {
       const { data } = await api.post('/api/components/upload', formData, {
         headers: { 'Content-Type': 'multipart/form-data' },
         onUploadProgress: (e) => {
           const percent = Math.round((e.loaded * 100) / e.total)
           setUploadProgress(percent)
         }
       })

       // æ˜¾ç¤ºä¸Šä¼ ç»“æœ
       if (data.isNewComponent) {
         message.success('æ–°ç»„ä»¶åˆ›å»ºæˆåŠŸï¼')
       } else if (data.isNewVersion) {
         message.success('æ–°ç‰ˆæœ¬åˆ›å»ºæˆåŠŸï¼')
       } else {
         message.success('è‰ç¨¿ç‰ˆæœ¬å·²æ›´æ–°ï¼')
       }

       // æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯
       if (data.warnings.length > 0) {
         data.warnings.forEach((w) => message.warning(w))
       }
     } catch (error) {
       message.error(error.response?.data?.message || 'ä¸Šä¼ å¤±è´¥')
     }
   }
   ```

2. **ä¸Šä¼ ç»“æœå±•ç¤º**
   - æ˜¾ç¤ºç»„ä»¶ä¿¡æ¯ï¼ˆåç§°ã€ç‰ˆæœ¬ã€çŠ¶æ€ï¼‰
   - æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ï¼ˆå¦‚ç¼ºå°‘æ–‡æ¡£ï¼‰
   - æä¾›å¿«é€Ÿè·³è½¬é“¾æ¥

3. **meta.json è¯´æ˜**
   - æä¾› meta.json æ¨¡æ¿ä¸‹è½½
   - è¯´æ˜å­—æ®µå«ä¹‰
   - åˆ†ç±»ç¼–ç å¯¹ç…§è¡¨

---

### ğŸ”· 4. æˆ‘çš„ç»„ä»¶é¡µé¢ï¼ˆMy Componentsï¼‰

**è·¯ç”±**: `/components/my`

**ç›®æ ‡ç”¨æˆ·**: å¼€å‘è€…

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æˆ‘çš„ç»„ä»¶                                [+ ä¸Šä¼ æ–°ç»„ä»¶]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»„ä»¶åç§°    æœ€æ–°ç‰ˆæœ¬  çŠ¶æ€    ä¸Šä¼ æ—¶é—´    æ“ä½œ            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  BarChart   v1.2.0   ğŸ”§è‰ç¨¿  2026-01-05  [è¯¦æƒ…][åˆ é™¤]   â”‚
â”‚  LineChart  v2.0.0   â­æ¨è  2026-01-03  [è¯¦æƒ…][åˆ é™¤]   â”‚
â”‚  PieChart   v1.0.0   âœ…å‘å¸ƒ  2025-12-28  [è¯¦æƒ…][åˆ é™¤]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Â« 1 2 3 Â»                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒåŠŸèƒ½**:

1. **ä¸ªäººç»„ä»¶åˆ—è¡¨**

   ```typescript
   // æŸ¥è¯¢å½“å‰ç”¨æˆ·åˆ›å»ºçš„ç»„ä»¶
   const { data } = await api.get('/api/components', {
     params: { createdBy: currentUser.id }
   })
   ```

2. **ç‰ˆæœ¬çŠ¶æ€å±•ç¤º**
   - ğŸ”§ è‰ç¨¿: å¯é‡æ–°ä¸Šä¼ è¦†ç›–
   - âœ… å·²å‘å¸ƒ: å·²å‘å¸ƒä½†éæ¨è
   - â­ æ¨è: å½“å‰æ¨èç‰ˆæœ¬

3. **å¿«é€Ÿæ“ä½œ**
   - æŸ¥çœ‹è¯¦æƒ…
   - ä¸Šä¼ æ–°ç‰ˆæœ¬
   - åˆ é™¤ç»„ä»¶

---

### ğŸ”· 5. ç»„ä»¶ç®¡ç†é¡µé¢ï¼ˆComponent Managementï¼‰- ç®¡ç†å‘˜

**è·¯ç”±**: `/components/manage/components`

**ç›®æ ‡ç”¨æˆ·**: ç®¡ç†å‘˜ï¼ˆæœ‰ `component.delete` æƒé™ï¼‰

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»„ä»¶ç®¡ç†                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” æœç´¢  ğŸ“‚ åˆ†ç±»ç­›é€‰  ğŸ·ï¸ çŠ¶æ€ç­›é€‰                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ID   ç»„ä»¶åç§°    åˆ†ç±»      ç‰ˆæœ¬æ•°  å·²å‘å¸ƒ  åˆ›å»ºè€…  æ“ä½œ   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  1    BarChart   å›¾è¡¨/æŸ±çŠ¶å›¾  3      2      å¼ ä¸‰   [è¯¦æƒ…] â”‚
â”‚  2    LineChart  å›¾è¡¨/æŠ˜çº¿å›¾  5      4      æå››   [è¯¦æƒ…] â”‚
â”‚  3    PieChart   å›¾è¡¨/é¥¼å›¾    2      1      ç‹äº”   [åˆ é™¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Â« 1 2 3 Â»                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒåŠŸèƒ½**:

1. **å…¨å±€ç»„ä»¶åˆ—è¡¨**
   - æŸ¥çœ‹æ‰€æœ‰ç»„ä»¶ï¼ˆä¸é™åˆ¶åˆ›å»ºè€…ï¼‰
   - æŒ‰åˆ†ç±»ã€çŠ¶æ€ã€åˆ›å»ºè€…ç­›é€‰

2. **æ‰¹é‡æ“ä½œ**
   - æ‰¹é‡åˆ é™¤
   - æ‰¹é‡å¯¼å‡º

3. **ç®¡ç†æ“ä½œ**
   - æŸ¥çœ‹è¯¦æƒ…
   - åˆ é™¤ç»„ä»¶ï¼ˆè½¯åˆ é™¤ï¼‰
   - æŸ¥çœ‹ç‰ˆæœ¬åˆ—è¡¨

---

### ğŸ”· 6. ç‰ˆæœ¬å®¡æ ¸é¡µé¢ï¼ˆVersion Approvalï¼‰- ç®¡ç†å‘˜

**è·¯ç”±**: `/components/manage/versions`

**ç›®æ ‡ç”¨æˆ·**: ç®¡ç†å‘˜ï¼ˆæœ‰ `component.publish` æƒé™ï¼‰

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç‰ˆæœ¬å®¡æ ¸                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ·ï¸ çŠ¶æ€ç­›é€‰: [å…¨éƒ¨] [è‰ç¨¿] [å·²å‘å¸ƒ]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»„ä»¶åç§°    ç‰ˆæœ¬    çŠ¶æ€    ä¸Šä¼ æ—¶é—´    åˆ›å»ºè€…    æ“ä½œ     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  BarChart   v1.3.0  ğŸ”§è‰ç¨¿  2026-01-05  å¼ ä¸‰  [å®¡æ ¸]     â”‚
â”‚  LineChart  v2.1.0  ğŸ”§è‰ç¨¿  2026-01-04  æå››  [å®¡æ ¸]     â”‚
â”‚  PieChart   v1.2.0  âœ…å‘å¸ƒ  2026-01-03  ç‹äº”  [æŸ¥çœ‹]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Â« 1 2 3 Â»                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®¡æ ¸å¼¹çª—**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®¡æ ¸ç‰ˆæœ¬: BarChart v1.3.0                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»„ä»¶ä¿¡æ¯:                                               â”‚
â”‚  â€¢ åç§°: æŸ±çŠ¶å›¾ç»„ä»¶                                       â”‚
â”‚  â€¢ æ¡†æ¶: Vue 3                                          â”‚
â”‚  â€¢ å…¥å£æ–‡ä»¶: index.esm.js                                â”‚
â”‚  â€¢ æ ·å¼æ–‡ä»¶: style.css                                   â”‚
â”‚  â€¢ æ–‡ä»¶å¤§å°: 128 KB                                      â”‚
â”‚                                                          â”‚
â”‚  æ–‡ä»¶æ¸…å•:                                               â”‚
â”‚  âœ“ index.esm.js                                         â”‚
â”‚  âœ“ style.css                                            â”‚
â”‚  âœ“ assets/preview.png                                   â”‚
â”‚                                                          â”‚
â”‚  [ğŸš€ å‘å¸ƒ] [ğŸ—‘ï¸ æ‹’ç»] [å–æ¶ˆ]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒåŠŸèƒ½**:

1. **å®¡æ ¸åˆ—è¡¨**

   ```typescript
   // è·å–è‰ç¨¿ç‰ˆæœ¬åˆ—è¡¨
   const { data } = await api.get('/api/components/:id/versions', {
     params: { status: 'draft' }
   })
   ```

2. **å‘å¸ƒæ“ä½œ**

   ```typescript
   const handlePublish = async (versionId: number) => {
     try {
       await api.post(`/api/component-versions/${versionId}/publish`)
       message.success('ç‰ˆæœ¬å‘å¸ƒæˆåŠŸï¼')

       // è¯¢é—®æ˜¯å¦è®¾ä¸ºæ¨èç‰ˆæœ¬
       Modal.confirm({
         title: 'æ˜¯å¦è®¾ä¸ºæ¨èç‰ˆæœ¬ï¼Ÿ',
         content: 'æ¨èç‰ˆæœ¬å°†åœ¨å‰ç«¯ç”»å¸ƒä¸­ä½¿ç”¨',
         onOk: async () => {
           await api.post(`/api/component-versions/${versionId}/set-latest`)
           message.success('å·²è®¾ä¸ºæ¨èç‰ˆæœ¬')
         }
       })
     } catch (error) {
       message.error('å‘å¸ƒå¤±è´¥')
     }
   }
   ```

3. **ç‰ˆæœ¬å¯¹æ¯”**
   - æ˜¾ç¤ºæ–°æ—§ç‰ˆæœ¬å·®å¼‚
   - æ–‡ä»¶å˜æ›´åˆ—è¡¨
   - ä¾èµ–å˜åŒ–

---

### ğŸ”· 7. åˆ†ç±»ç®¡ç†é¡µé¢ï¼ˆCategory Managementï¼‰- ç®¡ç†å‘˜

**è·¯ç”±**: `/components/manage/categories`

**ç›®æ ‡ç”¨æˆ·**: ç®¡ç†å‘˜

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†ç±»ç®¡ç†                                  [+ æ–°å»ºåˆ†ç±»]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š å›¾è¡¨ (chart)                           [ç¼–è¾‘] [åˆ é™¤]  â”‚
â”‚    â”œâ”€ ğŸ“Š æŸ±çŠ¶å›¾ (chart.bar)                [ç¼–è¾‘] [åˆ é™¤]  â”‚
â”‚    â”œâ”€ ğŸ“ˆ æŠ˜çº¿å›¾ (chart.line)               [ç¼–è¾‘] [åˆ é™¤]  â”‚
â”‚    â””â”€ ğŸ¥§ é¥¼å›¾ (chart.pie)                  [ç¼–è¾‘] [åˆ é™¤]  â”‚
â”‚                                                          â”‚
â”‚  ğŸ“ è¡¨å• (form)                            [ç¼–è¾‘] [åˆ é™¤]  â”‚
â”‚    â”œâ”€ ğŸ“ è¾“å…¥æ¡† (form.input)               [ç¼–è¾‘] [åˆ é™¤]  â”‚
â”‚    â””â”€ âœ… é€‰æ‹©å™¨ (form.select)              [ç¼–è¾‘] [åˆ é™¤]  â”‚
â”‚                                                          â”‚
â”‚  ğŸ“¦ å®¹å™¨ (container)                       [ç¼–è¾‘] [åˆ é™¤]  â”‚
â”‚    â””â”€ ğŸ“¦ é¢æ¿ (container.panel)            [ç¼–è¾‘] [åˆ é™¤]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ–°å»º/ç¼–è¾‘åˆ†ç±»å¼¹çª—**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–°å»ºåˆ†ç±»                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åˆ†ç±»å±‚çº§: â—‹ ä¸€çº§åˆ†ç±»  â— äºŒçº§åˆ†ç±»                        â”‚
â”‚                                                          â”‚
â”‚  çˆ¶åˆ†ç±»:   [å›¾è¡¨ â–¼]                                      â”‚
â”‚                                                          â”‚
â”‚  åˆ†ç±»ç¼–ç : chart.scatter                                 â”‚
â”‚  åˆ†ç±»åç§°: æ•£ç‚¹å›¾                                         â”‚
â”‚  æè¿°:     [ç”¨äºå±•ç¤ºæ•£ç‚¹æ•°æ®å…³ç³»...]                       â”‚
â”‚  å›¾æ ‡URL:  https://...                                  â”‚
â”‚  æ’åº:     10                                           â”‚
â”‚  çŠ¶æ€:     [âœ“] å¯ç”¨                                      â”‚
â”‚                                                          â”‚
â”‚  [ç¡®å®š] [å–æ¶ˆ]                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒåŠŸèƒ½**:

1. **åˆ†ç±»æ ‘å±•ç¤º**

   ```typescript
   const { data: tree } = await api.get('/api/component-categories/tree')

   <Tree
     treeData={tree}
     draggable  // æ‹–æ‹½æ’åº
     onDrop={handleSort}
   />
   ```

2. **åˆ›å»ºåˆ†ç±»**

   ```typescript
   const handleCreate = async (values) => {
     await api.post('/api/component-categories', values)
     message.success('åˆ›å»ºæˆåŠŸ')
     fetchTree() // åˆ·æ–°åˆ†ç±»æ ‘
   }
   ```

3. **ç¼–è¾‘åˆ†ç±»**
   - ä¿®æ”¹åç§°ã€æè¿°ã€å›¾æ ‡
   - è°ƒæ•´æ’åº
   - å¯ç”¨/ç¦ç”¨

4. **åˆ é™¤é™åˆ¶**
   - ä¸€çº§åˆ†ç±»æœ‰å­åˆ†ç±»æ—¶ä¸èƒ½åˆ é™¤
   - æœ‰ç»„ä»¶ä½¿ç”¨æ—¶ä¸èƒ½åˆ é™¤

---

## ğŸ‘¥ ç”¨æˆ·è§’è‰²ä¸æƒé™

### æƒé™å®šä¹‰

| æƒé™ä»£ç             | åç§°     | è¯´æ˜                       |
| ------------------- | -------- | -------------------------- |
| `component.read`    | æŸ¥çœ‹ç»„ä»¶ | æŸ¥è¯¢ç»„ä»¶åˆ—è¡¨ã€è¯¦æƒ…ã€åˆ†ç±»æ ‘ |
| `component.create`  | åˆ›å»ºç»„ä»¶ | ä¸Šä¼ ç»„ä»¶ã€åˆ›å»º/ç¼–è¾‘åˆ†ç±»    |
| `component.publish` | å‘å¸ƒç»„ä»¶ | å‘å¸ƒç‰ˆæœ¬ã€è®¾ç½®æ¨èç‰ˆæœ¬     |
| `component.delete`  | åˆ é™¤ç»„ä»¶ | åˆ é™¤ç»„ä»¶ã€ç‰ˆæœ¬ã€åˆ†ç±»       |

### è§’è‰²æ˜ å°„

#### ğŸ”µ æ™®é€šç”¨æˆ·ï¼ˆViewerï¼‰

**æƒé™**: `component.read`

**å¯è®¿é—®é¡µé¢**:

- âœ… ç»„ä»¶åº“ï¼ˆæŸ¥çœ‹ï¼‰
- âœ… ç»„ä»¶è¯¦æƒ…
- âŒ ä¸Šä¼ ç»„ä»¶
- âŒ ç»„ä»¶ç®¡ç†

**ä½¿ç”¨åœºæ™¯**: æµè§ˆç»„ä»¶ï¼Œåœ¨ç”»å¸ƒä¸­ä½¿ç”¨ç»„ä»¶

---

#### ğŸŸ¢ å¼€å‘è€…ï¼ˆDeveloperï¼‰

**æƒé™**: `component.read` + `component.create`

**å¯è®¿é—®é¡µé¢**:

- âœ… ç»„ä»¶åº“
- âœ… ç»„ä»¶è¯¦æƒ…
- âœ… ä¸Šä¼ ç»„ä»¶
- âœ… æˆ‘çš„ç»„ä»¶
- âŒ ç‰ˆæœ¬å®¡æ ¸
- âŒ åˆ†ç±»ç®¡ç†

**ä½¿ç”¨åœºæ™¯**: ä¸Šä¼ å’Œç®¡ç†è‡ªå·±çš„ç»„ä»¶

---

#### ğŸ”´ ç®¡ç†å‘˜ï¼ˆAdminï¼‰

**æƒé™**: æ‰€æœ‰æƒé™

**å¯è®¿é—®é¡µé¢**:

- âœ… æ‰€æœ‰é¡µé¢

**ä½¿ç”¨åœºæ™¯**: å®¡æ ¸ç‰ˆæœ¬ã€ç®¡ç†åˆ†ç±»ã€åˆ é™¤ç»„ä»¶

---

## ğŸ”„ äº¤äº’æµç¨‹å›¾

### æµç¨‹ 1: ç»„ä»¶ä¸Šä¼ ä¸å‘å¸ƒ

```
å¼€å‘è€…ä¸Šä¼  ZIP
     â†“
è§£æ meta.json
     â†“
åˆ›å»º draft ç‰ˆæœ¬ â”€â”€â”€â”€â”€â”€â†’ å¼€å‘è€…å¯æŸ¥çœ‹ã€æˆ‘çš„ç»„ä»¶ã€‘
     â†“
ç®¡ç†å‘˜å®¡æ ¸ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ç®¡ç†å‘˜è¿›å…¥ã€ç‰ˆæœ¬å®¡æ ¸é¡µã€‘
     â†“
ç‚¹å‡»ã€å‘å¸ƒã€‘
     â†“
ç‰ˆæœ¬çŠ¶æ€ = published â”€â”€â†’ æ›´æ–° publishedVersionCount
     â†“
(å¯é€‰) è®¾ä¸ºæ¨è â”€â”€â”€â”€â”€â”€â†’ è®¾ç½® is_latest = true
     â†“
å‰ç«¯ç”»å¸ƒå¯ç”¨ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ç»„ä»¶åº“æ˜¾ç¤ºè¯¥ç‰ˆæœ¬
```

---

### æµç¨‹ 2: ç”¨æˆ·æµè§ˆç»„ä»¶

```
ç”¨æˆ·æ‰“å¼€ã€ç»„ä»¶åº“ã€‘
     â†“
è°ƒç”¨ GET /api/component-categories/tree â”€â”€â†’ è·å–åˆ†ç±»æ ‘
     â†“
æ¸²æŸ“åˆ†ç±»ç­›é€‰å™¨
     â†“
ç”¨æˆ·é€‰æ‹©åˆ†ç±» + æœç´¢å…³é”®è¯
     â†“
è°ƒç”¨ GET /api/components?filters...
     â†“
æ˜¾ç¤ºç»„ä»¶åˆ—è¡¨ï¼ˆå¡ç‰‡/è¡¨æ ¼ï¼‰
     â†“
ç”¨æˆ·ç‚¹å‡»ç»„ä»¶å¡ç‰‡
     â†“
è·³è½¬åˆ°ã€ç»„ä»¶è¯¦æƒ…é¡µã€‘
     â†“
è°ƒç”¨ GET /api/components/:id
è°ƒç”¨ GET /api/components/:id/versions
     â†“
æ˜¾ç¤ºç»„ä»¶ä¿¡æ¯ + ç‰ˆæœ¬å†å²
     â†“
ç”¨æˆ·æŸ¥çœ‹æ¨èç‰ˆæœ¬ï¼ˆis_latest=trueï¼‰
     â†“
å¤åˆ¶ entryUrl ç”¨äºç”»å¸ƒ
```

---

### æµç¨‹ 3: ç®¡ç†å‘˜ç®¡ç†åˆ†ç±»

```
ç®¡ç†å‘˜æ‰“å¼€ã€åˆ†ç±»ç®¡ç†é¡µã€‘
     â†“
è°ƒç”¨ GET /api/component-categories/tree
     â†“
æ˜¾ç¤ºåˆ†ç±»æ ‘
     â†“
ç‚¹å‡»ã€æ–°å»ºåˆ†ç±»ã€‘
     â†“
å¡«å†™è¡¨å•ï¼ˆcode, name, level, parentIdï¼‰
     â†“
è°ƒç”¨ POST /api/component-categories
     â†“
åˆ›å»ºæˆåŠŸ â”€â”€â”€â”€â”€â”€â†’ åˆ·æ–°åˆ†ç±»æ ‘
     â†“
å¼€å‘è€…ä¸Šä¼ ç»„ä»¶æ—¶ â”€â”€â†’ meta.json è‡ªåŠ¨åŒ¹é…åˆ†ç±»
```

---

## ğŸ’¡ æŠ€æœ¯å»ºè®®

### 1. å‰ç«¯æŠ€æœ¯æ ˆ

**æ¨è**:

- **React** + TypeScript + Ant Design
- **Vue 3** + TypeScript + Element Plus
- **Next.js** (React SSR)

**å…³é”®åº“**:

- `axios` - HTTP è¯·æ±‚
- `react-query` / `@tanstack/vue-query` - æ•°æ®è·å–å’Œç¼“å­˜
- `zustand` / `pinia` - çŠ¶æ€ç®¡ç†
- `react-dropzone` - æ–‡ä»¶ä¸Šä¼ 

---

### 2. ç»„ä»¶è®¾è®¡æ¨¡å¼

#### åˆ†ç±»é€‰æ‹©å™¨ç»„ä»¶

```typescript
// CategoryCascader.tsx
import { Cascader } from 'antd'
import { useQuery } from '@tanstack/react-query'

export const CategoryCascader = ({ onChange }) => {
  const { data: tree } = useQuery({
    queryKey: ['categoryTree'],
    queryFn: () => api.get('/api/component-categories/tree')
  })

  const options = tree?.map(level1 => ({
    value: level1.code,
    label: level1.name,
    children: level1.children?.map(level2 => ({
      value: level2.code,
      label: level2.name
    }))
  }))

  return (
    <Cascader
      options={options}
      onChange={onChange}
      placeholder="é€‰æ‹©åˆ†ç±»"
      expandTrigger="hover"
    />
  )
}
```

---

#### ç»„ä»¶ä¸Šä¼ ç»„ä»¶

```typescript
// ComponentUploader.tsx
import { Upload, message, Progress } from 'antd'
import { useState } from 'react'

export const ComponentUploader = () => {
  const [progress, setProgress] = useState(0)

  const handleUpload = async (file: File) => {
    const formData = new FormData()
    formData.append('file', file)

    try {
      const { data } = await api.post('/api/components/upload', formData, {
        onUploadProgress: (e) => {
          setProgress(Math.round((e.loaded * 100) / e.total!))
        }
      })

      message.success(
        data.isNewComponent ? 'æ–°ç»„ä»¶åˆ›å»ºæˆåŠŸ' : 'ç‰ˆæœ¬æ›´æ–°æˆåŠŸ'
      )

      // æ˜¾ç¤ºè­¦å‘Š
      data.warnings.forEach((w: string) => message.warning(w))

      return data

    } catch (error: any) {
      message.error(error.response?.data?.message || 'ä¸Šä¼ å¤±è´¥')
      throw error
    }
  }

  return (
    <>
      <Upload.Dragger
        name="file"
        accept=".zip"
        maxCount={1}
        customRequest={({ file, onSuccess, onError }) => {
          handleUpload(file as File)
            .then(onSuccess)
            .catch(onError)
        }}
      >
        <p>æ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼  ZIP æ–‡ä»¶</p>
        <p>æœ€å¤§ 50MB</p>
      </Upload.Dragger>

      {progress > 0 && <Progress percent={progress} />}
    </>
  )
}
```

---

### 3. çŠ¶æ€ç®¡ç†

```typescript
// stores/componentStore.ts
import { create } from 'zustand'

interface ComponentStore {
  components: Component[]
  selectedCategory: string[]
  setSelectedCategory: (category: string[]) => void
  fetchComponents: (filters: any) => Promise<void>
}

export const useComponentStore = create<ComponentStore>((set) => ({
  components: [],
  selectedCategory: [],

  setSelectedCategory: (category) => set({ selectedCategory: category }),

  fetchComponents: async (filters) => {
    const { data } = await api.get('/api/components', { params: filters })
    set({ components: data.data })
  }
}))
```

---

### 4. è·¯ç”±é…ç½®ï¼ˆReact Router ç¤ºä¾‹ï¼‰

```typescript
// routes.tsx
import { Routes, Route, Navigate } from 'react-router-dom'

export const ComponentRoutes = () => (
  <Routes>
    {/* å…¬å…±é¡µé¢ */}
    <Route path="library" element={<ComponentLibrary />} />
    <Route path="library/:id" element={<ComponentDetail />} />

    {/* å¼€å‘è€…é¡µé¢ */}
    <Route path="upload" element={
      <RequireAuth permission="component.create">
        <ComponentUpload />
      </RequireAuth>
    } />

    <Route path="my" element={
      <RequireAuth permission="component.create">
        <MyComponents />
      </RequireAuth>
    } />

    {/* ç®¡ç†å‘˜é¡µé¢ */}
    <Route path="manage">
      <Route path="components" element={
        <RequireAuth permission="component.delete">
          <ComponentManagement />
        </RequireAuth>
      } />

      <Route path="versions" element={
        <RequireAuth permission="component.publish">
          <VersionApproval />
        </RequireAuth>
      } />

      <Route path="categories" element={
        <RequireAuth permission="component.create">
          <CategoryManagement />
        </RequireAuth>
      } />
    </Route>

    {/* é»˜è®¤é‡å®šå‘ */}
    <Route path="*" element={<Navigate to="library" replace />} />
  </Routes>
)
```

---

## ğŸ¯ æ€»ç»“

### é¡µé¢ä¼˜å…ˆçº§

#### ğŸ”´ P0ï¼ˆå¿…éœ€ï¼‰

1. **ç»„ä»¶åº“é¡µé¢** - æ‰€æœ‰ç”¨æˆ·çš„å…¥å£
2. **ç»„ä»¶è¯¦æƒ…é¡µ** - æŸ¥çœ‹ç»„ä»¶å’Œç‰ˆæœ¬ä¿¡æ¯
3. **ä¸Šä¼ ç»„ä»¶é¡µé¢** - å¼€å‘è€…æ ¸å¿ƒåŠŸèƒ½

#### ğŸŸ¡ P1ï¼ˆé‡è¦ï¼‰

4. **ç‰ˆæœ¬å®¡æ ¸é¡µé¢** - ç®¡ç†å‘˜å®¡æ ¸æµç¨‹
5. **æˆ‘çš„ç»„ä»¶é¡µé¢** - å¼€å‘è€…ç®¡ç†è‡ªå·±çš„ç»„ä»¶

#### ğŸŸ¢ P2ï¼ˆå¢å¼ºï¼‰

6. **ç»„ä»¶ç®¡ç†é¡µé¢** - ç®¡ç†å‘˜å…¨å±€ç®¡ç†
7. **åˆ†ç±»ç®¡ç†é¡µé¢** - ç®¡ç†å‘˜é…ç½®åˆ†ç±»

---

### å¼€å‘å»ºè®®

1. **å…ˆå®ç°æ ¸å¿ƒæµç¨‹**: ç»„ä»¶åº“ â†’ è¯¦æƒ… â†’ ä¸Šä¼ 
2. **é€æ­¥æ·»åŠ ç®¡ç†åŠŸèƒ½**: å®¡æ ¸ â†’ åˆ†ç±»ç®¡ç†
3. **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ**:
   - å®æ—¶ä¸Šä¼ è¿›åº¦
   - æ–‡ä»¶é¢„è§ˆ
   - æ“ä½œç¡®è®¤æç¤º
4. **æƒé™æ§åˆ¶**: åœ¨è·¯ç”±å’Œç»„ä»¶çº§åˆ«éƒ½åšæƒé™æ£€æŸ¥
5. **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯æç¤ºå’Œé‡è¯•æœºåˆ¶

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸš€
